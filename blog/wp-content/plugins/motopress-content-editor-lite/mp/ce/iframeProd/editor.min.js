function _typeof(y){_typeof="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c};return _typeof(y)}
function mpceRunScene(){try{(function(c){MP.BootstrapSelect=can.Construct({setSelected:function(a){a.prop("selected",!0);a.closest("select").next(".bootstrap-select").find(".filter-option").text(a.text())},setDisabled:function(a,b){"undefined"==typeof b&&(b=!0);var d=a.closest("select"),c=a.prop("index"),d=d.next(".bootstrap-select").find('ul[data-select-id="'+d.prop("id")+'"] > li[rel="'+c+'"] > a');b?d.attr("data-disabled",""):d.removeAttr("data-disabled")},appendOption:function(a,b){var d=c("<li />",
{rel:b.prop("index")}),e=c("<a />",{tabindex:"-1",href:"#",text:b.text()});"undefined"!=typeof b.attr("data-disabled")&&e.attr("data-disabled","");e.appendTo(d);a.next(".bootstrap-select").find('ul[data-select-id="'+a.prop("id")+'"]').append(d)},removeOption:function(a){var b=a.closest("select");if(1<b.find("option").length){var d=a.prop("index"),d=b.next(".bootstrap-select").find('ul[data-select-id="'+b.prop("id")+'"] > li[rel="'+d+'"]');d.nextAll("li").each(function(){c(this).attr("rel",parseInt(c(this).attr("rel"))-
1)});d.remove();a.parent().is("optgroup")&&!a.siblings("option").length?(a.parent("optgroup").remove(),1==b.children("optgroup").length&&(a=b.find("optgroup:first option:last").prop("index"),b.next(".bootstrap-select").find('ul[data-select-id="'+b.prop("id")+'"] > li[rel="'+a+'"]').removeClass("optgroup-div"))):a.remove();setSelected(b.find("option:first"))}},updateOptionText:function(a,b){var d=a.closest("select"),c=a.prop("index"),d=d.next(".bootstrap-select").find('ul[data-select-id="'+d.prop("id")+
'"] > li[rel="'+c+'"] > a');a.text(b);d.text(b)}},{})})(jQuery),function(c){CE.Utils=can.Construct({body:c("body"),addSceneAction:function(a){this.body.addClass("motopress-"+a+"-action")},isSceneAction:function(a){return this.body.hasClass("motopress-"+a+"-action")},removeSceneAction:function(a){this.body.removeClass("motopress-"+a+"-action")},triggerWindowEvent:function(a){c(window).trigger(a);CE.Utils.fixFlexslider()},fixFlexslider:function(){c(".motopress-flexslider").each(function(){c(this).data("flexslider")&&
c(this).data("flexslider").resize()})},addSceneState:function(a){this.body.addClass("motopress-"+a+"-state")},removeSceneState:function(a){this.body.removeClass("motopress-"+a+"-state")},isSceneState:function(a){return this.body.hasClass("motopress-"+a+"-state")}},{})}(jQuery),function(c){can.Control("CE.Scene",{markEdgeRow:function(a){c.each(a,function(){c(this).hasClass(parent.CE.Iframe.myThis.gridObj.row.edgeclass)?c(this).addClass("motopress-row-edge"):c(this).find(parent.MP.Utils.convertClassesToSelector(parent.CE.Iframe.myThis.gridObj.row.edgeclass)).first().addClass("motopress-row-edge")})},
markEdgeSpan:function(a,b,d){d="undefined"!==typeof d&&d;var e="undefined"!==typeof b&&b?".motopress-filler-content":"[data-motopress-shortcode]",f,g;c.each(a,function(){f=c(this).find(e).first();g=f.parent();g.hasClass("motopress-block-content")||(g.addClass("motopress-clmn-edge"),d&&f.remove())})},myThis:null},{container:null,contentWrapper:null,addSectionPanel:null,init:function(){parent.window.IframeCE=window.CE;CE.Scene.myThis=this;this.container=c("#motopress-container");this.contentWrapper=
c(".motopress-content-wrapper");new CE.SceneState;CE.WPMore.getInstance();new CE.StyleEditor(motopressCE.styleEditor);parent.window.MP.Editor.triggerEverywhere("SceneInited");var a=c("<div />",{"class":"mpce-leftbar-wrapper"});c("body").prepend(a);new CE.LeftBar(a);new CE.DragDrop;new CE.Selectable;new CE.Link;this.addSectionPanelEl=c("<section />",{"class":"mpce-add-section-panel"});this.contentWrapper.append(this.addSectionPanelEl);new CE.Panels.AddSectionPanel(this.addSectionPanelEl,{layoutDialog:parent.CE.Panels.LayoutChooserDialog.myThis,
templateDialog:parent.CE.Panels.TemplateChooserDialog.myThis,permanent:!0});setTimeout(function(){parent.CE.EventDispatcher.Dispatcher.dispatchOnce(CE.SceneEvents.sceneInited.NAME,new CE.SceneEvents.sceneInited)},1500);parent.CE.Iframe.runDependentCallbacks();this.sceneEvents()},insertContent:function(a){this.addSectionPanelEl.before(a);parent.CE.Iframe.myThis.unwrapGrid();CE.DragDrop.myThis.setEdges();CE.DragDrop.myThis.main();parent.CE.Iframe.$window.trigger("resize")},removeContent:function(){this.contentWrapper.children().not(this.addSectionPanelEl).remove()},
sceneEvents:function(){this.container.off("hover").hover(function(){CE.Utils.addSceneAction("container-hover")},function(){CE.Utils.removeSceneAction("container-hover")});parent.CE.EventDispatcher.Dispatcher.addListener(parent.CE.LocalRevision.Events.RevisionPicked.NAME,function(){c("body").trigger("MPCESceneRevisionPicked")});parent.CE.EventDispatcher.Dispatcher.addListener(parent.CE.WPRevision.Events.RevisionPicked.NAME,function(){c("body").trigger("MPCESceneRevisionPicked")})}})}(jQuery),function(c){CE.SceneEvents=
{};CE.SceneEvents.Event=parent.CE.EventDispatcher.Event.extend({},{});CE.SceneEvents.EntityEvent=CE.SceneEvents.Event.extend({},{entityName:null,init:function(a){this.entityName=a?a:"Widget"},getEntityName:function(){return this.entityName}});CE.SceneEvents.EntitySettingsEvent=CE.SceneEvents.EntityEvent.extend({},{propName:null,init:function(a,b){this.entityName=a;this.propName=b},getPropName:function(){return this.propName}});CE.SceneEvents.StylePresetEvent=CE.SceneEvents.Event.extend({},{presetObj:null,
init:function(a){this.presetObj=a||null},getPreset:function(){return this.presetObj},getPresetLabel:function(){return this.presetObj?this.presetObj.getLabel():""}});CE.SceneEvents.InteractionEvent=CE.SceneEvents.Event.extend({},{})}(jQuery),function(c){CE.SceneEvents.EntityCreated=CE.SceneEvents.EntityEvent.extend({NAME:"scene.entity.created"},{});CE.SceneEvents.EntityDuplicated=CE.SceneEvents.EntityEvent.extend({NAME:"scene.entity.duplicated"},{});CE.SceneEvents.EntityDeleted=CE.SceneEvents.EntityEvent.extend({NAME:"scene.entity.deleted"},
{});CE.SceneEvents.EntityMoved=CE.SceneEvents.EntityEvent.extend({NAME:"scene.entity.moved"},{});CE.SceneEvents.EntityResized=CE.SceneEvents.EntityEvent.extend({NAME:"scene.entity.resized"},{});CE.SceneEvents.EntitySettingsChanged=CE.SceneEvents.EntitySettingsEvent.extend({NAME:"scene.entity_settings.changed"},{});CE.SceneEvents.EntityStylesChanged=CE.SceneEvents.EntitySettingsEvent.extend({NAME:"scene.entity_styles.changed"},{});CE.SceneEvents.StylePresetDeleted=CE.SceneEvents.StylePresetEvent.extend({NAME:"scene.style_preset.deleted"},
{});CE.SceneEvents.StylePresetRenamed=CE.SceneEvents.StylePresetEvent.extend({NAME:"scene.style_preset.renamed"},{});CE.SceneEvents.StylePresetClassChanged=CE.SceneEvents.StylePresetEvent.extend({NAME:"scene.style_preset.class_changed"},{oldClass:"",init:function(a,b){this._super(a);this.oldClass=b},getOldClass:function(){return this.oldClass}});CE.SceneEvents.StylePresetCreated=CE.SceneEvents.StylePresetEvent.extend({NAME:"scene.style_preset.created"},{});CE.SceneEvents.StylePresetChanged=CE.SceneEvents.StylePresetEvent.extend({NAME:"scene.style_preset.changed"},
{});CE.SceneEvents.InlineEditorOpened=CE.SceneEvents.InteractionEvent.extend({NAME:"scene.inline_editor.opened"},{});CE.SceneEvents.InlineEditorClosed=CE.SceneEvents.InteractionEvent.extend({NAME:"scene.inline_editor.closed"},{});CE.SceneEvents.sceneInited=CE.SceneEvents.Event.extend({NAME:"scene.scene.inited"},{});CE.SceneEvents.SnapshotApplied=CE.SceneEvents.Event.extend({NAME:"scene.snapshot.applied"},{snapshot:null,init:function(a){this.snapshot=a},getSnapshot:function(){return this.snapshot}});
CE.SceneEvents.SnapshotTakenBefore=CE.SceneEvents.Event.extend({NAME:"scene.snapshot.taken_before"},{init:function(){}})}(jQuery),function(c){CE.SceneEvents.ContentChanged=parent.CE.EventDispatcher.Event.extend({NAME:"scene.content.changed"},{event:null,init:function(a){this.event=a},getConcreteEvent:function(){return this.event}});c=new (parent.CE.EventDispatcher.Subscriber.extend({},{getSubscribedEvents:function(){return[[[CE.SceneEvents.EntityCreated.NAME,CE.SceneEvents.EntityDeleted.NAME,CE.SceneEvents.EntityDuplicated.NAME,
CE.SceneEvents.EntityResized.NAME,CE.SceneEvents.EntityMoved.NAME,CE.SceneEvents.EntitySettingsChanged.NAME,CE.SceneEvents.EntityStylesChanged.NAME,CE.SceneEvents.StylePresetDeleted.NAME,CE.SceneEvents.StylePresetRenamed.NAME,CE.SceneEvents.StylePresetCreated.NAME,CE.SceneEvents.StylePresetChanged.NAME,CE.SceneEvents.SnapshotApplied.NAME],this.proxy(this.onSceneEvent)]]},onSceneEvent:function(a){parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.ContentChanged.NAME,new CE.SceneEvents.ContentChanged(a))}}));
parent.CE.EventDispatcher.Dispatcher.addSubscriber(c);parent.CE.IframeEventStorage.storeSubscriber(c)}(jQuery),function(c){var a=!1;CE.SceneState=can.Construct({setContentChanged:function(b){a=!0},setContentNotChanged:function(){a=!1},isContentChanged:function(){return a}},{init:function(){parent.CE.EventDispatcher.Dispatcher.addListener(CE.SceneEvents.ContentChanged.NAME,this.constructor.proxy("setContentChanged"));parent.CE.EventDispatcher.Dispatcher.addListener(parent.CE.PageSettingsEvents.SettingsChanged.NAME,
this.constructor.proxy("setContentChanged"));parent.MP.Editor.onIfr("AfterUpdate",this.constructor.proxy("setContentNotChanged"))}})}(jQuery),function(c){CE.WPMore=can.Construct({_instance:null,getInstance:function(){null===this._instance&&(this._instance=new CE.WPMore);return this._instance}},{$body:c("body"),$contentWrapper:parent.CE.Iframe.myThis.sceneContent,contentSectionExists:parent.CE.Iframe.myThis.contentSectionExists,$moreTag:c('<section class="mpce-wp-more-tag" />'),$style:c(),pointClass:".mpce-wp-more-point",
pointClassName:"mpce-wp-more-point",tagClass:".mpce-wp-more-tag",tagClassName:"mpce-wp-more-tag",pointPosClassNamePrefix:"mpce-wp-more-point-",pointPosClassPrefix:".mpce-wp-more-point-",selectedState:"wp-more-selected",init:function(){this.$contentWrapper=parent.CE.Iframe.myThis.sceneContent;this.contentSectionExists=parent.CE.Iframe.myThis.contentSectionExists;this.initState();this.initStyle();this.initEvents()},initState:function(){this.contentSectionExists&&this.$contentWrapper.find(this.tagClass).length&&
(this.$moreTag=this.$contentWrapper.find(this.tagClass),CE.Utils.addSceneState(this.selectedState),this.fixTagDOMPosition());this.$moreTag.attr("title",localStorage.getItem("CEMoreHandlerTitle"))},initEvents:function(){this.$contentWrapper.on("click",">"+this.pointClass+", >.motopress-handle-middle-in>"+this.pointClass+"",this.proxy("onPointClick")).on("click",">"+this.tagClass,this.proxy("onTagClick"))},initStyle:function(){this.$style=c('<style type="text/css" id="mpce-wp-more-style" />');this.$body.append(this.$style)},
onPointClick:function(a,b){b=c(a.target);switch(this.getPositionType(b)){case "first":this.$moreTag.prependTo(this.$contentWrapper);break;case "last":this.$contentWrapper.find(">.motopress-row:last").after(this.$moreTag);break;default:b.parent().before(this.$moreTag)}CE.Utils.addSceneState(this.selectedState)},onTagClick:function(){CE.Utils.removeSceneState(this.selectedState);this.$moreTag.detach()},fixTagDOMPosition:function(){var a=this.$moreTag.closest(".motopress-content-wrapper>.motopress-row");
a.length&&a.after(this.$moreTag)},getPointTemplate:function(a){return c("<div />",{"class":this.pointClassName+" "+this.getPointClassByType(a),title:localStorage.getItem("CEWPMorePointTitle")})},pointAppendTo:function(a,b){a.length&&!this.isPointExists(b)&&a.append(this.getPointTemplate(b))},pointPrependTo:function(a,b){a.length&&!this.isPointExists(b)&&a.prepend(this.getPointTemplate(b))},isPointExists:function(a){return!!("undefined"!==typeof a&&a&&this.contentSectionExists&&this.$contentWrapper.find(this.pointPosClassPrefix+
a).length)},getPointClassByType:function(a){return"undefined"!==typeof a&&a?this.pointPosClassNamePrefix+a:""},getPositionType:function(a){return a.hasClass(this.getPointClassByType("first"))?"first":a.hasClass(this.getPointClassByType("last"))?"last":"middle"}})}(jQuery),can.view.stache("leftbar",'<div id="motopress-content-editor-leftbar" class="motopress-default" tabindex="-1">\n\t\t<div id="mpce-leftbar-widgets-wrapper">\n\t\t\t<div class="mpce-navigation">\n\t\t\t\t<ul>\n\t\t\t\t\t{{#each library}}\n\t\t\t\t\t\t<li class="menu-item motopress-leftbar-group motopress-default">\n\t\t\t\t\t\t\t<div class="motopress-leftbar-group-inner motopress-default">\n\t\t\t\t\t\t\t\t<div class="motopress-leftbar-group-icon" style="background-image: url(\'{{icon}}\');">\n\t\t\t\t\t\t\t\t\t<div class="motopress-leftbar-group-active motopress-default active"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="sub-menu-outer-wrapper">\n\t\t\t\t\t\t\t\t<div class="sub-menu-inner-wrapper">\n\t\t\t\t\t\t\t\t\t<ul class="sub-menu right motopress-ce-object-container">\n\t\t\t\t\t\t\t\t\t\t{{#each objects}}}\n\t\t\t\t\t\t\t\t\t\t<li class="menu-item">\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<section class="motopress-ce-object motopress-default-drag" \n\t\t\t\t\t\t\t\t\t\t\t\tdata-motopress-close-type="{{closeType}}" \n\t\t\t\t\t\t\t\t\t\t\t\tdata-motopress-shortcode="{{id}}" \n\t\t\t\t\t\t\t\t\t\t\t\tdata-motopress-group="{{group}}" \n\t\t\t\t\t\t\t\t\t\t\t\tdata-motopress-parameters="{{parameters}}" \n\t\t\t\t\t\t\t\t\t\t\t\tdata-motopress-styles="{{styles}}"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="motopress-ce-object-inner motopress-default">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="motopress-ce-object-dot motopress-default">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="motopress-ce-object-icon" style="background-image: url(\'{{icon}}\');">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="motopress-ce-object-name motopress-default motopress-no-color-text">{{name}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t{{/each}}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t<p class="sub-menu-wrapper-description">Drag to stage to insert</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{/each}}\n\t\t\t\t\t{{#templates.length}}\n\t\t\t\t\t\t<li class="menu-item motopress-leftbar-group motopress-leftbar-group-templates motopress-default">\n\t\t\t\t\t\t<div class="motopress-leftbar-group-inner motopress-default">\n\t\t\t\t\t\t\t\t<div class="motopress-leftbar-group-icon motopress-leftbar-group-templates-icon">\n\t\t\t\t\t\t\t\t\t<div class="motopress-leftbar-group-active motopress-default active"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="sub-menu-outer-wrapper">\n\t\t\t\t\t\t\t\t<div class="sub-menu-inner-wrapper">\n\t\t\t\t\t\t\t\t\t<ul class="sub-menu right motopress-ce-object-container">\n\t\t\t\t\t\t\t\t\t\t{{#each templates}}}\n\t\t\t\t\t\t\t\t\t\t<li class="menu-item">\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t<section class="motopress-ce-object motopress-ce-widget-template motopress-default-drag" data-id="{{id}}">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="motopress-ce-object-inner motopress-default">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="motopress-ce-object-dot motopress-default">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="motopress-ce-object-icon" style="background-image: url(\'{{icon}}\');">\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="motopress-ce-object-name motopress-default motopress-no-color-text">{{name}}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t\t\t\t</li>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t{{/each}}\n\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t<p class="sub-menu-wrapper-description">Drag to stage to insert</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t{{/templates.length}}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id="mpce-leftbar-custom-wrapper">\n\t\t</div>\n\t\t<div class="motopress-leftbar-toggle">\n\t\t\t<i aria-hidden="true" class="motopress-leftbar-toggle-hide fa fa-chevron-circle-left"></i>\n\t\t\t<i aria-hidden="true" class="motopress-leftbar-toggle-show fa fa-chevron-circle-right"></i>\n\t</div>\n\t</div>\n\t<div class="motopress-leftbar-overlap"></div>'),
function(c){var a,b,d,e;can.Control("CE.LeftBar",{myThis:null},{width:56,visibility:!1,active:!1,templates:null,leftbarWrapper:null,init:function(a,b){d=c("html");e=c("body");CE.LeftBar.myThis=this;this._setTemplates(parent.CE.ObjectTemplatesLibrary.myThis.getWidgets().attr());this.leftBarWrapper=a;this.renderView();parent.CE.ObjectTemplatesLibrary.myThis.getWidgets().bind("change",this.proxy(function(a){this._updateTemplates(a.target.attr())}));this.initStyle()},makeObjectsDraggable:function(){c.each(a.find(".motopress-ce-widget-template:not([data-motopress-shortcode])"),
function(a,b){var d=c(b).attr("data-id"),d=parent.CE.ObjectTemplatesLibrary.myThis.getWidgetById(d).atts;parent.CE.ShortcodeAtts.setAttsToEl(c(b),d)});c.each(a.find(".motopress-ce-object:not(.ce_draggable_new_block)"),function(a,b){new CE.DraggableNewBlock(c(b))})},renderView:function(){this.leftBarWrapper.html(can.view("leftbar",{library:this._prepareLibrary(),templates:this.templates,test:window.asd}));a=this.leftBarWrapper.children("#motopress-content-editor-leftbar");b=this.leftBarWrapper.children(".motopress-leftbar-overlap");
this.makeObjectsDraggable()},initStyle:function(){var a=parseFloat(d.css("padding-left"))+this.width;this.$style=c('<style type="text/css" id="mpce-left-bar-style" />');this.$style.text("@media (min-width: 769px) { html.mpce-page-offset { padding-left: "+a+"px !important; } }");e.append(this.$style)},_prepareLibrary:function(){var a=[];c.each(parent.CE.WidgetsLibrary.myThis.getLibrary(),function(b,d){if(d.show){var e=[];c.each(d.objects,function(a,b){if(b.show){var d={closeType:b.closeType,id:b.id,
icon:b.icon,group:b.groupId,name:b.name},f={};c.each(b.parameters,function(a){f[a]={}});d.parameters=JSON.stringify(f);var g={};c.each(b.styles,function(a){g[a]={}});d.styles=JSON.stringify(g);e.push(d)}});e.length&&a.push({id:d.id,name:d.name,icon:d.icon,objects:e})}});return a},_setTemplates:function(a){return this.templates=new can.List(a)},_updateTemplates:function(a){this.templates.replace(a);this.makeObjectsDraggable()},disable:function(){b.show()},enable:function(){b.hide()},setActive:function(){this.active=
!0},setInactive:function(){this.active=!1},isActive:function(){return this.active},setVisible:function(){this.visibility=!0},setInvisible:function(){this.visibility=!1},isVisible:function(){return this.visibility},hide:function(c){if(("undefined"===typeof c?0:c)||this.isActive())this.active=!1,this.setInvisible(),a.addClass("mpce-leftbar-hidden"),b.addClass("mpce-leftbar-overlap-hidden"),d.removeClass("mpce-page-offset"),parent.CE.Iframe.myThis.setSceneWidth(),CE.Resizer.myThis.updateAllHandles(),
parent.MP.Editor.triggerEverywhere("LeftBarHide")},show:function(c){if(("undefined"===typeof c?0:c)||this.isActive())this.active=!0,this.setVisible(),a.removeClass("mpce-leftbar-hidden"),b.removeClass("mpce-leftbar-overlap-hidden"),d.addClass("mpce-page-offset"),parent.CE.Iframe.myThis.setSceneWidth(),CE.Resizer.myThis.updateAllHandles(),parent.MP.Editor.triggerEverywhere("LeftBarShow")},getSpace:function(){return this.isVisible()?this.width:0},getWidth:function(){return this.width},".motopress-leftbar-toggle click":function(b,
d){a.hasClass("mpce-leftbar-hidden")?this.show(!0):this.hide(!0)}})}(jQuery),function(c){CE.Grid=can.Control.extend({myThis:null,ENTITIES:{ROW:"row",COLUMN:"column",WIDGET:"widget",PAGE:"page"}},{columnMarginPiece:null,column:null,padding:null,columnCount:parent.CE.Iframe.myThis.gridObj.row.col,columnWidthStatus:null,colWidthByNumber:[],rowEl:c("<div />",{"class":parent.CE.Iframe.myThis.gridObj.row["class"]}),columnEl:c("<div />",{}),setup:function(a){var b=null;a.append(this.rowEl);for(a=1;a<=this.columnCount;a++)b=
this.columnEl.clone().addClass(parent.CE.Iframe.myThis.gridObj.span["class"]+a).appendTo(this.rowEl),this.colWidthByNumber[a]=parseFloat(b.width());this.columnEl.clone().addClass(parent.CE.Iframe.myThis.gridObj.span["class"]+1).appendTo(this.rowEl)},init:function(a){CE.Grid.myThis=this;this.column=a.find("."+parent.CE.Iframe.myThis.gridObj.span.minclass+":last");this.setSize();parent.MP.Editor.onIfr("Resize",this.proxy("setSize"))},setSize:function(){var a=this.column.width();this.padding=parseFloat(this.column.css("padding-left"));
this.columnMarginPiece=parseFloat(this.column.css("margin-left"));this.columnWidthStatus&&(CE.Resizer.myThis.updateSplittableOptions(null,null,null,"init"),CE.Resizer.myThis.updateSplitterHeight());this.columnWidthStatus=a}})}(jQuery),function(c){CE.ShortcodeStyle=can.Construct({generateStateCSS:function(a){var b=[];c.each(a,function(a,c){if(""!==c)switch(a){case "padding-top":case "padding-bottom":case "padding-left":case "padding-right":case "margin-top":case "margin-bottom":case "margin-left":case "margin-right":case "border-top-width":case "border-bottom-width":case "border-left-width":case "border-right-width":case "border-top-left-radius":case "border-top-right-radius":case "border-bottom-left-radius":case "border-bottom-right-radius":isNaN(c)||
b.push(CE.ShortcodeStyle.generateStyleRule(a,c+"px !important;"));break;case "background-position-x":case "background-position-y":isNaN(c)||b.push(CE.ShortcodeStyle.generateStyleRule(a,c+"% !important;"));break;case "background-gradient":if(""!==c){var f=parent.CE.CtrlGradient.parseGradientStr(c);!f||""===f["initial-color"]&&""===f["final-color"]||(c=f.angle+"deg,"+(""!==f["initial-color"]?f["initial-color"]:"transparent")+","+(""!==f["final-color"]?f["final-color"]:"transparent"),f=[],f.push("-moz-linear-gradient("+
c+") !important;"),f.push("-webkit-linear-gradient("+c+") !important;"),f.push("linear-gradient("+c+") !important;"),b.push(CE.ShortcodeStyle.generateStyleRule("background-image",f)))}break;case "background-image-type":"none"===c&&b.push(CE.ShortcodeStyle.generateStyleRule("background-image","none !important;"));break;case "background-image":b.push(CE.ShortcodeStyle.generateStyleRule(a,"url("+c+") !important;"));break;case "background-color":case "border-color":case "color":b.push(CE.ShortcodeStyle.generateStyleRule(a,
c+" !important;"));break;case "background-position":"custom"!==c&&b.push(CE.ShortcodeStyle.generateStyleRule(a,c+" !important;"));break;case "border-radius":b.push(CE.ShortcodeStyle.generateStyleRule("-webkit-"+a,c+" !important;"));b.push(CE.ShortcodeStyle.generateStyleRule("-moz-"+a,c+" !important;"));b.push(CE.ShortcodeStyle.generateStyleRule(a,c+" !important;"));break;default:b.push(CE.ShortcodeStyle.generateStyleRule(a,c+" !important;"))}});return b},generateCSS:function(a,b,d){void 0===_typeof(d)&&
(d=!1);null===a&&(a="%className%");var e=d;d=!1;var f="";b.hasOwnProperty("up")&&c.each(CE.ShortcodeStyle.generateStateCSS(b.up),function(b,c){f+="."+a+c;d&&(f+="."+a+"."+CE.ShortcodeStyle.previewStateClassPrefix+"up"+c)});b.hasOwnProperty("hover")&&c.each(CE.ShortcodeStyle.generateStateCSS(b.hover),function(b,d){e&&(f+="."+a+"."+CE.ShortcodeStyle.previewStateClassPrefix+"hover"+d);f+="."+a+":hover"+d});b.hasOwnProperty("tablet")&&c.each(CE.ShortcodeStyle.generateStateCSS(b.tablet),function(b,c){f=
d?f+("."+a+"."+CE.ShortcodeStyle.previewStateClassPrefix+"tablet"+c):f+("@media (max-width: 768px) { ."+a+c+"}")});b.hasOwnProperty("mobile")&&c.each(CE.ShortcodeStyle.generateStateCSS(b.mobile),function(b,c){f=d?f+("."+a+"."+CE.ShortcodeStyle.previewStateClassPrefix+"mobile"+c):f+("@media (max-width: 320px) { ."+a+c+"}")});return f},generateStyleRule:function(a,b){var d=":not(."+motopressCE.styleEditor["const"].prefixRuleDisable+a+"){";c.isArray(b)||(b=[b]);c.each(b,function(){d+=a+":"+this});return d+=
"}"},previewStateClassPrefix:"motopress-ce-preview-state-"},{settings:null,css:null,objectType:"",emulateCSS:null,id:null,init:function(a,b,d,e){e=c.extend({objectType:""},e);this.id=a;this.objectType=e.objectType;this.settings=can.isPlainObject(b)?b:{};"string"===typeof d?(this.css=d,this.emulateCSS=CE.ShortcodeStyle.generateCSS(this.getClassName(),this.settings,!0)):this.regenerateCSS();this.detectStyleTag();this.updateStyleTag()},clone:function(){throw Error("Must be implemented in sub-class!");
},getId:function(){return this.id},getClassName:function(){return this.id},getCSS:function(){return this.css},getEmulateCSS:function(){return this.emulateCSS},getSettings:function(){return c.extend({},this.settings)},getStateSettings:function(a){return this.settings.hasOwnProperty(a)?c.extend({},this.settings[a]):{}},getObjectType:function(){return this.objectType},isEmpty:function(){var a=!0;c.each(this.settings,function(b,d){c.each(d,function(b,d){""!==d&&(a=!1)})});return a},regenerateCSS:function(){this.css=
CE.ShortcodeStyle.generateCSS(this.getClassName(),this.settings,!1);this.emulateCSS=CE.ShortcodeStyle.generateCSS(this.getClassName(),this.settings,!0)},update:function(a){this.settings=a;this.regenerateCSS();this.updateStyleTag()},updateState:function(a,b){this.settings[a]=b;this.regenerateCSS();this.updateStyleTag()},"delete":function(){this.styleTag.remove()},updateStyleTag:function(){var a=CE.StyleEditor.myThis.isEmulateCSSMode()?this.getEmulateCSS():this.getCSS();this.styleTag.text(a)},detectStyleTag:function(){var a=
this.stylesWrapper.children("#"+this.id);a.length||(a=this.generateStyleTag());this.styleTag=a},generateStyleTag:function(){var a=c("<style />",{id:this.id,text:this.getCSS()});this.stylesWrapper.append(a);return a}})}(jQuery),function(c){CE.ShortcodeStyle("CE.ShortcodePrivateStyle",{stylesWrapper:c("#motopress-ce-private-styles-wrapper"),addRenderedStyleTags:function(a){a.filter(function(a,d){return 0===CE.ShortcodePrivateStyle.stylesWrapper.children("#"+c(d).attr("id")).length});CE.ShortcodePrivateStyle.stylesWrapper.append(a)}},
{styleTag:null,stylesWrapper:null,clone:function(){return new CE.ShortcodePrivateStyle(this.className,c.extend(!0,{},this.settings),this.css,{objectType:this.objectType})},init:function(a,b,d,c){this.stylesWrapper=CE.ShortcodePrivateStyle.stylesWrapper;this._super(a,b,d,c)},clear:function(){this.update({});parent.CE.Save.changeContent()}})}(jQuery),function(c){CE.ShortcodeStyle("CE.ShortcodePresetStyle",{stylesWrapper:c("#motopress-ce-preset-styles-wrapper")},{styleTag:null,label:"",stylesWrapper:null,
init:function(a,b,d,e){e=c.extend({label:""},e);this.stylesWrapper=CE.ShortcodePresetStyle.stylesWrapper;this.label=e.label;this._super(a,b,d,e)},getLabel:function(){return this.label},setLabel:function(a){this.label=a}})}(jQuery),function(c){CE.StyleEditor=can.Construct({myThis:null},{privateStyles:{},presetStyles:{},presetsLastId:null,presetDefaultLabel:null,prefixPresetClass:null,prefixPrivateClass:null,presetSaveModal:null,emulateCSSMode:!0,init:function(a){CE.StyleEditor.myThis=this;this.presetSaveModal=
parent.CE.PresetSaveModal.myThis;this.prefixPresetClass=a["const"].prefixPresetClass;this.prefixPrivateClass=a["const"].prefixPrivateClass;this.presetsLastId=a.presetsLastId;this.presetDefaultLabel=a["const"].presetDefaultLabel;this.initPrivateStyles(a["private"]);this.initPresetStyles(a.presets)},initPresetStyles:function(a){var b=this;c.each(a,function(a,e){e=c.extend({settings:{},css:"",objectType:""},e);b.presetStyles[a]=new CE.ShortcodePresetStyle(a,e.settings,e.css,e)})},getPresetsLastId:function(){return this.presetsLastId},
incPresetsLastId:function(){this.presetsLastId++;return this.presetsLastId},initPrivateStyles:function(a){var b=this;this.privateStyles={};c.each(a,function(a,e){e=c.extend({css:"",settings:{},objectType:""},e);b.privateStyles[a]=new CE.ShortcodePrivateStyle(a,e.settings,null,e.objectType)})},clonePrivateStyles:function(a){var b={};c.each(void 0===a?this.privateStyles:a,function(a,c){b[a]=c.clone()});return b},applyPrivateStyles:function(a){this.privateStyles=a},getPrivateStylesString:function(){var a=
{};c.each(this.privateStyles,function(b,d){d.isEmpty()||(a[b]={settings:d.getSettings(),objectType:d.getObjectType(),css:d.getCSS()})});return JSON.stringify(a)},getPrivateStyleInstance:function(a,b){var d=this.retrievePrivateClass(a);return""!==d&&this.privateStyles.hasOwnProperty(d)?this.privateStyles[d]:this.createPrivateStyle(null,null,b)},getPresetStyleInstance:function(a){a=this.retrievePresetClass(a);return this.isExistsPreset(a)?this.presetStyles[a]:null},createPrivateStyle:function(a,b,d){b||
(b=this.generatePrivateClass());this.privateStyles[b]=new CE.ShortcodePrivateStyle(b,a,null,{objectType:d});return this.privateStyles[b]},retrievePrivateClass:function(a){a=(new RegExp("(?:^|\\s)+("+this.prefixPrivateClass+"(?:[\\d]+-[A-F\\d]{13}))(?:$|\\s)+","i")).exec(a);return null!==a&&2===a.length?a[1]:""},generatePrivateClass:function(){var a=parent.MP.Utils.uniqid(this.prefixPrivateClass+parent.motopressCE.postID+"-");return this.privateStyles.hasOwnProperty(a)?this.generatePrivateClass():
a},getPresetsString:function(){var a={};c.each(this.presetStyles,function(b,d){a[b]={settings:d.getSettings(),objectType:d.getObjectType(),css:d.getCSS(),label:d.getLabel()}});return JSON.stringify(a)},getPresetsList:function(a){var b={};c.each(this.presetStyles,function(a,c){b[c.getId()]=c.getLabel()});a&&(b=c.extend({"":localStorage.getItem("CENone")},b));return b},getPresetsListSelect2:function(){var a=[];c.each(this.presetStyles,function(b,d){a.push({id:d.getId(),text:d.getLabel()})});return a},
generatePresetClassName:function(){return this.prefixPresetClass+this.incPresetsLastId()},createPreset:function(a,b){b=c.extend({label:"",objectType:""},b);var d=this.generatePresetClassName();b.label.length||(b.label=this.presetDefaultLabel+this.getPresetsLastId());this.presetStyles[d]=new CE.ShortcodePresetStyle(d,a,void 0,b);parent.CE.Save.changeContent();return this.presetStyles[d]},deletePreset:function(a){this.isExistsPreset(a)&&(this.presetStyles[a]["delete"](),delete this.presetStyles[a],
parent.CE.Save.changeContent());return!0},isExistsPreset:function(a){return this.presetStyles.hasOwnProperty(a)},retrievePresetClass:function(a){a=(new RegExp("(?:^|\\s)+("+this.prefixPresetClass+"(?:[\\d]+))(?:$|\\s)+","i")).exec(a);return null!==a&&2===a.length?a[1]:""},changePrivateClassToDuplicated:function(a){if(""!==a){var b=CE.StyleEditor.myThis.retrievePrivateClass(a);if(""!==b){var d=CE.StyleEditor.myThis.duplicatePrivateStyle(b);a=parent.MP.Utils.replaceClassInString(b,d.getId(),a)}}return a},
duplicatePrivateStyle:function(a){this.privateStyles.hasOwnProperty(a)?(a=this.privateStyles[a],a=this.createPrivateStyle(a.getSettings(),a.getObjectType())):a=this.createPrivateStyle();parent.CE.Save.changeContent();return a},setEmulateCSSMode:function(){this.emulateCSSMode=!0;c.each(this.presetStyles,function(){this.updateStyleTag()});c.each(this.privateStyles,function(){this.updateStyleTag()})},unsetEmulateCSSMode:function(){this.emulateCSSMode=!1;c.each(this.presetStyles,function(){this.updateStyleTag()});
c.each(this.privateStyles,function(){this.updateStyleTag()})},isEmulateCSSMode:function(){return this.emulateCSSMode},hasObjectPrivateStyle:function(a){a=this._retrieveCustomStyleClasses(a);return this.retrievePrivateClass(a)?!this.getPrivateStyleInstance(a).isEmpty():!1},mergeStylesToNewPreset:function(a){var b=a.control(CE.Controls);b.display();var d=b.stylesCtrl.getCtrlByName("mp_custom_style"),e=d.get();a=this.getPrivateStyleInstance(e,a.attr("data-motopress-shortcode"));var f=this.getPresetStyleInstance(e),
e=a.getSettings();f&&(e=c.extend(!0,{},f.getSettings(),e));f={objectType:a.getObjectType()};e=this.createPreset(e,f);a.clear();d.selectPreset(e.getId());b.stylesCtrl.changeProperty(d)},savePresets:function(){return c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"json",data:{action:"motopress_ce_save_presets",nonce:parent.motopressCE.nonces.motopress_ce_save_presets,postID:parent.motopressCE.postID,presetsData:{presetsLastId:this.getPresetsLastId(),presets:this.getPresetsString()}}})},_retrieveCustomStyleClasses:function(a){a=
a.attr("data-motopress-styles")?JSON.parse(a.attr("data-motopress-styles")):{};return a.hasOwnProperty("mp_custom_style")?a.mp_custom_style.value:""}})}(jQuery),function(c){CE.Link=can.Construct({myThis:null,wpLink:null,submitCallback:null,closeCallback:null,inputs:{}},{init:function(){CE.Link.myThis=this;CE.Link.wpLink=parent.wpLink;CE.Link.inputs.submit=c("#wp-link-submit",parent.document);CE.Link.inputs.cancel=c("#wp-link-cancel",parent.document);parent.MP.Utils.version_compare(parent.motopressCE.settings.wp.wordpress_version,
"4.2",">=")?(CE.Link.inputs.url=c("#wp-link-url",parent.document),CE.Link.inputs.title=c("#wp-link-text",parent.document),CE.Link.inputs.openInNewTab=c("#wp-link-target",parent.document)):(CE.Link.inputs.url=c("#url-field",parent.document),CE.Link.inputs.title=c("#link-title-field",parent.document),CE.Link.inputs.openInNewTab=c("#link-target-checkbox",parent.document));c("#wp-link-classes",parent.document).length||c("#link-options .link-target",parent.document).before('<div class="wp-link-classes-field">\n<label><span>'+
localStorage.getItem("CELinkClass")+'</span>\n<input id="wp-link-classes" type="text"></label>\n</div>');CE.Link.inputs.classes=c("#wp-link-classes",parent.document);CE.Link.inputs.classes.closest("div").show()},open:function(a,b,d,e){var f={url:!0,title:!0,target:!0};"undefined"!==typeof b&&c.extend(f,b);if("undefined"!=typeof CE.Link.wpLink)if(CE.Link.submitCallback=d,CE.Link.inputs.submit.off("mousedown.motopress-wplink-submit").on("mousedown.motopress-wplink-submit",this.wpSubmitButtonHandler),
CE.Link.inputs.cancel.off("click.motopress-wplink-cancel").on("click.motopress-wplink-cancel",e),parent.tinyMCE.activeEditor){parent.wpActiveEditor=parent.tinyMCE.activeEditor.id;var g=null;CE.Link.wpLink.setDefaultValues=function(){var b=null,d=null;c.isPlainObject(a)?(g=a.href,b="_blank"===a.target?!0:!1,d=a.textarea):(g=a.val(),d=a);if(""===g||"#"===g)g="http://";CE.Link.inputs.url.val(g);CE.Link.inputs.openInNewTab.prop("checked",b);CE.Link.inputs.classes.val("");CE.Link.wpLink.textarea=d};CE.Link.wpLink.open();
g||(g=c.isPlainObject(a)?a.href:a.val(),CE.Link.inputs.url.val(g));"undefined"===typeof CE.Link.inputs.close&&(CE.Link.inputs.close=c(".ui-dialog-titlebar-close",parent.document));CE.Link.inputs.close.off("mousedown.motopress-wplink-close").on("mousedown.motopress-wplink-close",e);f.url||CE.Link.inputs.url.closest("div").hide();f.title||CE.Link.inputs.title.closest("div").hide();f.target||CE.Link.inputs.openInNewTab.closest("div").hide();CE.Link.inputs.classes.closest("div").show();parent.CE.Iframe.myThis.wpLinkCloseCallback(this.onDialogClose)}else parent.CE.CodeModal.myThis.switchVisual(),
c.when(parent.motopressCE.tinyMCEInited.motopresscodecontent).done(this.proxy(function(){this.open(a,b,d,e)}))},wpCancelButtonHandler:function(a){CE.Link.wpLink.close();return!1},wpSubmitButtonHandler:function(a){a=CE.Link.wpLink.getAttrs();if(a.href&&"http://"!=a.href)return a.classes=CE.Link.inputs.classes.val(),CE.Link.submitCallback&&CE.Link.submitCallback(a),CE.Link.wpLink.close(),!1},onDialogClose:function(){CE.Link.inputs.submit.off("mousedown.motopress-wplink-submit");CE.Link.inputs.close.off("mousedown.motopress-wplink-close");
CE.Link.inputs.url.closest("div").show();CE.Link.inputs.title.closest("div").show();CE.Link.inputs.openInNewTab.closest("div").show();CE.Link.inputs.classes.closest("div").hide()}})}(jQuery),function(c){CE.Style=can.Construct({gridProps:null,props:{mp_custom_style:{type:"style_editor",label:localStorage.getItem("CECustomStyle"),description:localStorage.getItem("CECustomStyleDesc"),parameters:{"background-color":{type:"color-picker",label:localStorage.getItem("CEBgColor"),"default":""},color:{type:"color-picker",
label:"Text Color","default":""},"background-image-type":{type:"radio-buttons",label:"Background Type","default":"image",list:{image:"Image",gradient:"Gradient",none:"None"}},"background-image":{type:"image-src",label:localStorage.getItem("CEBgImage"),"default":"",dependency:{parameter:"background-image-type",value:"image"}},"background-repeat":{type:"select",label:localStorage.getItem("CEBgImageRepeat"),"default":"",list:{"":localStorage.getItem("CEDefault"),repeat:localStorage.getItem("CERepeat"),
"repeat-x":localStorage.getItem("CERepeatX"),"repeat-y":localStorage.getItem("CERepeatY"),"no-repeat":localStorage.getItem("CENoRepeat")},dependency:{parameter:"background-image",except:""}},"background-size":{type:"select",label:localStorage.getItem("CEBgImageSize"),"default":"",list:{"":localStorage.getItem("CEDefault"),cover:localStorage.getItem("CECover"),contain:localStorage.getItem("CEContain"),auto:localStorage.getItem("CEAuto")},dependency:{parameter:"background-image",except:""}},"background-position":{type:"select",
label:localStorage.getItem("CEBgImagePosition"),"default":"",list:{"":localStorage.getItem("CEDefault"),"center center":localStorage.getItem("CECenter")+" "+localStorage.getItem("CEMiddle"),"center top":localStorage.getItem("CECenter")+" "+localStorage.getItem("CETop"),"center bottom":localStorage.getItem("CECenter")+" "+localStorage.getItem("CEBottom"),"left top":localStorage.getItem("CELeft")+" "+localStorage.getItem("CETop"),"left center":localStorage.getItem("CELeft")+" "+localStorage.getItem("CEMiddle"),
"left bottom":localStorage.getItem("CELeft")+" "+localStorage.getItem("CEBottom"),"right top":localStorage.getItem("CERight")+" "+localStorage.getItem("CETop"),"right center":localStorage.getItem("CERight")+" "+localStorage.getItem("CECenter"),"right bottom":localStorage.getItem("CERight")+" "+localStorage.getItem("CEBottom"),custom:localStorage.getItem("CECustom")},dependency:{parameter:"background-image",except:""}},"background-position-x":{type:"spinner",label:localStorage.getItem("CEBgImagePositionX"),
min:0,max:100,step:1,"default":"50",dependency:{parameter:"background-position",value:"custom"}},"background-position-y":{type:"spinner",label:localStorage.getItem("CEBgImagePositionY"),min:0,max:100,step:1,"default":"50",dependency:{parameter:"background-position",value:"custom"}},"background-attachment":{type:"select",label:localStorage.getItem("CEBgImageAttachment"),"default":"",list:{"":localStorage.getItem("CEDefault"),fixed:localStorage.getItem("CEFixed"),scroll:localStorage.getItem("CEScroll")},
dependency:{parameter:"background-image",except:""}},"background-gradient":{type:"gradient-picker",label:"","default":"",dependency:{parameter:"background-image-type",value:"gradient",needDependenceValue:!0}},"padding-top":{type:"text",label:localStorage.getItem("CEPaddingTop"),"default":""},"padding-bottom":{type:"text",label:localStorage.getItem("CEPaddingBottom"),"default":""},"padding-left":{type:"text",label:localStorage.getItem("CEPaddingLeft"),"default":""},"padding-right":{type:"text",label:localStorage.getItem("CEPaddingRight"),
"default":""},"margin-top":{type:"text",label:localStorage.getItem("CEMarginTop"),"default":""},"margin-bottom":{type:"text",label:localStorage.getItem("CEMarginBottom"),"default":""},"margin-left":{type:"text",label:localStorage.getItem("CEMarginLeft"),"default":""},"margin-right":{type:"text",label:localStorage.getItem("CEMarginRight"),"default":""},"border-style":{type:"select",label:localStorage.getItem("CEBorderStyle"),"default":"",list:{"":localStorage.getItem("CEDefault"),none:localStorage.getItem("CENone"),
solid:localStorage.getItem("CESolid"),dotted:localStorage.getItem("CEDotted"),dashed:localStorage.getItem("CEDashed"),"double":localStorage.getItem("CEDouble"),grouve:localStorage.getItem("CEGrouve"),ridge:localStorage.getItem("CERidge"),inset:localStorage.getItem("CEInset"),outset:localStorage.getItem("CEOutset")}},"border-top-width":{type:"text",label:localStorage.getItem("CEBorderWidthTop"),"default":"",dependency:{parameter:"border-style",except:"none"}},"border-bottom-width":{type:"text",label:localStorage.getItem("CEBorderWidthBottom"),
"default":"",dependency:{parameter:"border-style",except:"none"}},"border-left-width":{type:"text",label:localStorage.getItem("CEBorderWidthLeft"),"default":"",dependency:{parameter:"border-style",except:"none"}},"border-right-width":{type:"text",label:localStorage.getItem("CEBorderWidthRight"),"default":"",dependency:{parameter:"border-style",except:"none"}},"border-color":{type:"color-picker",label:localStorage.getItem("CEBorderColor"),"default":"",dependency:{parameter:"border-style",except:"none"}},
"border-top-left-radius":{type:"text",label:localStorage.getItem("CEBorderRadiusTopLeft"),"default":""},"border-top-right-radius":{type:"text",label:localStorage.getItem("CEBorderRadiusTopRight"),"default":""},"border-bottom-left-radius":{type:"text",label:localStorage.getItem("CEBorderRadiusBottomLeft"),"default":""},"border-bottom-right-radius":{type:"text",label:localStorage.getItem("CEBorderRadiusBottomRight"),"default":""}}},mp_style_classes:{type:"select2",label:localStorage.getItem("CEStyleClassesLabel"),
description:localStorage.getItem("CEStyleClassesLabelDesc")},margin:{type:"margin",label:localStorage.getItem("CEMarginLabel"),sides:["top","bottom","left","right"],values:["none",0,10,15,20,25,50,100],"default":["none","none","none","none"],classPrefix:"motopress-margin-",regExp:""}},getStyleEditorProps:function(){return c.extend({},CE.Style.props.mp_custom_style.parameters)},globalPredefinedClasses:{}},{})}(jQuery),function(c){CE.Shortcode=can.Control.extend({listensTo:["render"],preloaderClass:"motopress-small-preload",
isGrid:function(a){return a===parent.CE.WidgetsLibrary.myThis.getGroup("mp_grid").id},getChild:function(a){var b=a.children(".motopress-ce-child-detector");b.length||(b=a.children("div"));return b},getShortcodeName:function(a){return a.attr("data-motopress-shortcode")},getShortcodeGroup:function(a){return a.attr("data-motopress-group")}},{group:null,isGrid:!1,shortcodeName:null,shortcodeLabel:null,shortcode:null,child:null,groupItemName:null,childName:null,activeParameter:"active",init:function(a,
b){this.group=CE.Shortcode.getShortcodeGroup(a);this.isGrid=CE.Shortcode.isGrid(this.group);this.shortcodeName=CE.Shortcode.getShortcodeName(a);this.shortcodeLabel=parent.CE.WidgetsLibrary.myThis.getShortcodeLabel(this.group,this.shortcodeName);this.childName=this.groupItemName=null;this.activeParameter="active";this.shortcode=a;this.isGrid||(this.child=CE.Shortcode.getChild(this.shortcode))},restoreClone:function(a){this.shortcode=this.element=a;this.isGrid||(this.child=this.constructor.getChild(this.shortcode))},
setGroupItemName:function(a){this.groupItemName=a},setChildName:function(a){this.childName=a},setActiveParameter:function(a){this.activeParameter=a}})}(jQuery),function(c){CE.Shortcode("CE.Controls",{},{settingsForms:null,styleForms:null,settingsCtrl:null,stylesCtrl:null,isNew:!1,init:function(a,b){this._super(a,b);this.isNew=b.isNew;this.setupForms()},restoreClone:function(a){this._super(a);this.settingsCtrl.restoreClone({formsMainCtrl:this});this.stylesCtrl.restoreClone({formsMainCtrl:this})},setupForms:function(){this.settingsForms=
c("<div />",{"class":"motopress-settings-forms"});this.settingsCtrl=new parent.CE.SettingsControlsForm(this.settingsForms,{formsMainCtrl:this});this.styleForms=c("<div />",{"class":"motopress-style-forms"});this.stylesCtrl=new parent.CE.StyleControlsForm(this.styleForms,{formsMainCtrl:this})},render:function(a){if(!this.isGrid){if(a||"undefined"===typeof a)CE.Resizer.myThis.updateBottomInHandleMiddle(),CE.Resizer.myThis.updateHandle(),CE.Resizer.myThis.updateHandleMiddle();CE.Resizer.myThis.updateSplitterHeight();
this.shortcode.find("a").attr("tabindex",-1)}},renderShortcode:function(a,b){"undefined"===typeof a&&(a="updated");"undefined"===typeof b&&(b="created"===a);if(!this.isGrid){var d=this.element.closest(".motopress-block-content").find(">.mpce-widget-tools-wrapper>.mpce-object-panel>.mpce-panel-btn-settings");d.addClass(CE.Shortcode.preloaderClass);var e=parent.CE.ShortcodeAtts.getAttrsFromElement(this.element),f="undefined"!==typeof this.element.attr("data-motopress-wrap-render")?this.element.attr("data-motopress-wrap-render"):
null;if(b){if(e.parameters){e.parameters=this.settingsCtrl.setDefaultAttrs(e.parameters);var g=this.element.attr("data-motopress-content");e.content="undefined"!==typeof g?g:""}e.styles&&(e.styles=this.stylesCtrl.setDefaultAttrs(e.styles))}"undefined"!==typeof this.element.attr("data-motopress-active-item")&&(g=c.parseJSON(e.parameters),g[this.activeParameter]={value:this.element.attr("data-motopress-active-item")},e.parameters=JSON.stringify(g));c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"html",
data:{action:"motopress_ce_render_shortcode",nonce:parent.motopressCE.nonces.motopress_ce_render_shortcode,postID:parent.motopressCE.postID,closeType:e.closeType,shortcode:this.shortcodeName,wrapRender:f,parameters:e.parameters,styles:e.styles,content:e.content.replace(/\[\]/g,"[")},success:this.proxy(function(b){var e=c(b).find(".motopress-ce-private-styles-updates-wrapper").andSelf().filter(".motopress-ce-private-styles-updates-wrapper").children("style");CE.ShortcodePrivateStyle.addRenderedStyleTags(e);
b=c(b).find(".motopress-ce-rendered-content-wrapper").andSelf().filter(".motopress-ce-rendered-content-wrapper").children();e=this.element.closest(".motopress-clmn");if(!e.closest(".motopress-row").parent(".motopress-content-wrapper").length){var e=e.closest(".motopress-row").nextAll(".motopress-handle-middle-in:last"),f=parseInt(e.css("min-height"));e.height(f)}CE.DragDrop.myThis.resetLastHandleMiddleHeight();this.element.html(b);this.child=CE.Shortcode.getChild(this.shortcode);b=this.shortcode.find("img");
var g=b.length,p=0;if(g)b.on("load",this.proxy(function(){p++;p===g&&this.element.trigger("render")}));b=parent.CE.WidgetsLibrary.myThis.getParametersAttrs(this.group,this.shortcodeName);var m;this.groupItemName&&(m=parent.jQuery(this.settingsForms[0]).find(".motopress-property-group").control(parent.CE.CtrlGroup),b=b[this.groupItemName],"created"===a&&(this.element.attr("data-need-detect-inner-ctrls")?(m.initChildForms(),this.element.removeAttr("data-need-detect-inner-ctrls"),this.settingsCtrl.display(!0)):
b.hasOwnProperty("items")&&b.items.hasOwnProperty("count")&&0<b.items.count&&parent.jQuery(this.settingsForms.find('> [data-motopress-parameter="'+this.groupItemName+'"] > .motopress-property-group > .motopress-property-button-wrapper > .motopress-property-button-default')).trigger("click",b.items.count),m.dependency&&this.settingsForms.find('[data-motopress-parameter="'+m.dependency.parameter+'"] .motopress-controls').trigger("change",!1)),m.reassignShortcodes());"created"===a?c("body").trigger("MPCEObjectCreated",
[this.element,this.shortcodeName]):c("body").trigger("MPCEObjectUpdated",[this.element,this.shortcodeName]);this.element.trigger("render");d.removeClass(CE.Shortcode.preloaderClass);this.groupItemName&&m.accordion.hasClass("ui-accordion")&&(b=m.accordion.accordion("option","active"),m.interact("activate",b));"created"===a?parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntityCreated.NAME,new CE.SceneEvents.EntityCreated(this.shortcodeLabel)):parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntitySettingsChanged.NAME,
new CE.SceneEvents.EntitySettingsChanged(this.shortcodeLabel,"[property]"))}),error:function(a){a=c.parseJSON(a.responseText);c.isPlainObject(a)&&a.hasOwnProperty("message")&&(a.debug?console.log(a.message):(parent.MP.Flash.setFlash(a.message,"error"),parent.MP.Flash.showMessage()));d.removeClass(CE.Shortcode.preloaderClass)}})}},display:function(a){this.settingsCtrl.display(a);this.stylesCtrl.display(a)}})}(jQuery),function(c){CE.InlineEditorImageLibrary=can.Construct({myThis:null},{frame:null,propertyImage:null,
init:function(){CE.InlineEditorImageLibrary.myThis=this;this.frame=new parent.wp.media.view.MediaFrame.Post({id:"motopress-inline-editor-image-library",multiple:!1,library:{type:"image",search:null},contentUserSetting:!0,syncSelection:!0});this.frame.on("attach",function(){parent.jQuery("#motopress-inline-editor-image-library").addClass("hide-menu")})},open:function(){this.frame.open()},onSelect:function(a){this.frame.on("insert",this.proxy(function(){var b=this.frame.state(),d=b.get("selection").models[0],
b=b.display(d).toJSON(),d=parent.wp.media.editor.send.attachment(b,d.toJSON());a(d)}))}})}(jQuery),function(c){CE.Controls("CE.InlineEditor",{media:null,curElement:null,styleFormats:!1,init:function(){CE.InlineEditor.media=new CE.InlineEditorImageLibrary;CE.InlineEditor.media.onSelect(function(a){var b=CE.InlineEditor.curElement.control(CE.InlineEditor).editor;a.done(function(a){b.insertContent(a);setTimeout(function(){b.focus();b.selection.select(b.getBody(),!0);b.selection.collapse(!1)},200)})});
c(document).on("mousedown",".mce-tinymce.mce-panel",function(a){a.preventDefault()});c(document).on("keydown",'[data-motopress-shortcode="mp_text"], [data-motopress-shortcode="mp_heading"]',function(a){a.which===c.ui.keyCode.TAB?CE.Selectable.myThis.unselect():a.which===c.ui.keyCode.ESCAPE&&(CE.InlineEditor.curElement&&CE.InlineEditor.curElement.control(CE.InlineEditor).close(),a=c(this).closest(".motopress-block-content").find(">.mpce-widget-tools-wrapper>.mpce-object-panel>.mpce-panel-btn-settings"),
CE.Selectable.focusWithoutScroll(CE.Selectable.getFocusAreaBySelected(CE.Selectable.myThis.getShortcodeByHandle(a))))})},isTinymce:function(a){var b=!1;c(a.target).hasClass("mpce-widget-select-handle")||(a=c(a.currentTarget.activeElement),a.length&&(a.closest("[data-motopress-shortcode]").length||a.closest(".mce-tinymce").length||a.closest(".mce-window").length||a.closest(".mce-popover").length)&&(b=!0));return b},destroyAll:function(){var a;parent.CE.Iframe.myThis.sceneContent.find('[data-motopress-shortcode="mp_text"], [data-motopress-shortcode="mp_heading"]').each(function(){a=
c(this).control(CE.InlineEditor);a.destroyEditor()})},reinitAll:function(){var a;parent.CE.Iframe.myThis.sceneContent.find('[data-motopress-shortcode="mp_text"], [data-motopress-shortcode="mp_heading"]').each(function(){a=c(this).control(CE.InlineEditor);a.initEditor()})}},{id:null,isOpen:!1,editor:null,blockContent:null,floatpanel:null,saved:!1,contentObserver:null,editorLoadedDeferred:null,init:function(a,b){this._super(a,b);this.editorLoadedDeferred=c.Deferred();this.id=parent.MP.Utils.uniqid();
this.blockContent=this.element.parent(parent.MP.Utils.convertClassesToSelector(CE.DragDrop.myThis.blockContent.attr("class")))},destroy:function(){CE.InlineEditor.curElement=null;this.floatpanel&&this.floatpanel.remove();this._super()},initEditor:function(){this.editorLoadedDeferred||(this.editorLoadedDeferred=c.Deferred());var a=this,b=function(){var b=parent.MP.Utils.convertClassesToSelector(parent.CE.Panels.SettingsDialog.myThis.dialogClass)+", .mce-toolbar-grp, .image-details, #wp-link-wrap",
d;d=" mpce_image wp_img_edit | ";d+="bold italic underline | ";c.isEmptyObject(CE.InlineEditor.styleFormats)||(d+="styleselect | ");d+="formatselect | fontsizeselect forecolor | alignleft aligncenter alignright | numlist bullist outdent indent | link unlink blockquote hr removeformat";tinyMCE.PluginManager.add("wordpress",parent.tinyMCE.AddOnManager.PluginManager.get("wordpress"));tinyMCE.PluginManager.add("wpeditimage",parent.tinyMCE.AddOnManager.PluginManager.get("wpeditimage"));tinyMCE.init({selector:"#"+
a.id,inline:!0,plugins:"link hr textcolor lists wordpress wpeditimage image",visual:!1,convert_urls:!1,menubar:!1,toolbar:d,block_formats:"Paragraph=p;Header 1=h1;Header 2=h2;Header 3=h3;Header 4=h4;Header 5=h5;Header 6=h6;Address=address;Pre=pre;",fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 18px 24px 30px 36px 42px 48px 60px 72px 96px",language:parent.MP.Settings.lang.tinymce,skin:"motopresscontenteditor",browser_spellcheck:parent.MP.Settings.spellcheck,style_formats_merge:!1,style_formats:CE.InlineEditor.styleFormats,
custom_ui_selector:b,setup:function(b){a.editor=b;b.on("focus",function(b){a.isOpen=!0;CE.InlineEditor.curElement=a.element;parent.CE.Panels.SettingsDialog.myThis.close();CE.Selectable.myThis.unselect();CE.DragDrop.myThis.resetLastHandleMiddleHeight();a.blockContent.addClass("motopress-overflow-visible-important");parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.InlineEditorOpened.NAME,new CE.SceneEvents.InlineEditorOpened)});b.on("blur",function(b){a.isOpen&&(a.isOpen=!1,a.save(),a.blockContent.removeClass("motopress-overflow-visible-important"),
CE.Resizer.myThis.updateHandle(),CE.Selectable.myThis.unselect(),a.afterBlur(),parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.InlineEditorClosed.NAME,new CE.SceneEvents.InlineEditorClosed))});b.on("nodechange",function(a){a.target!=tinyMCE.activeEditor&&a.stopImmediatePropagation()});b.on("execCommand",function(b){switch(b.command){case "mceToggleEditor":if(!a.floatpanel&&(b=c("body").children(".mce-floatpanel:last"),b.length&&(a.floatpanel=b,50<b.height()))){var d=b.find('.mce-container-body.mce-flow-layout > [role="toolbar"]:first').outerHeight(!0)-
2;b.width(723).height(d);b.children(".mce-container-body.mce-abs-layout").width(723).height(d).children(".mce-container.mce-panel").width(723).height(d).children(".mce-container-body.mce-stack-layout").width(723).height(d)}a.floatpanel.offset().left+a.floatpanel.width()>c(window).width()&&(b=a.element.offset().left+a.element.width()-a.floatpanel.width(),a.floatpanel.css("left",b))}});b.addButton("mpce_image",{icon:"image",tooltip:localStorage.getItem("CEInsertEditImage"),stateSelector:"img:not([data-mce-object],[data-mce-placeholder]),figure.image",
onclick:function(a){this.active()?this.$el.next().trigger("click"):CE.InlineEditor.media.open()},onpostrender:function(){this.$el.next().hide()}})},init_instance_callback:function(b){a.contentObserver=can.compute(b.getContent({format:"html"}));a.contentObserver.bind("change",a.proxy("contentChanged"));c.each(b.menuItems.formats.menu,function(a,b){"Blocks"===b.text&&c.each(b.menu,function(a,d){"Div"===d.text&&delete b.menu[a]})});c(b.getBody()).on("blur",function(){a.save();a.afterBlur()});c(b.getBody()).on("focus",
function(){a.saved=!1});a.editorLoadedDeferred.resolve()}})};if(parent.tinyMCE.activeEditor)var d=setTimeout(function(){b();clearTimeout(d)},0);else parent.CE.CodeModal.myThis.switchVisual(),c.when(parent.motopressCE.tinyMCEInited.motopresscodecontent).done(b)},destroyEditor:function(){this.editorLoadedDeferred&&"pending"===this.editorLoadedDeferred.state()&&this.editorLoadedDeferred.reject();this.editor.destroy();this.editor=null}," render":function(){this.shortcode.children("div").attr("id",this.id);
this.initEditor()},open:function(){if(this.editor)this.editor.execCommand("mceToggleEditor",!1),this.editor.focus();else{var a=this;c.when(this.editorLoadedDeferred).done(function(){a.open()})}},close:function(){this.editor&&this.editor.getBody().blur()},save:function(){if(!this.saved){var a=this.editor.getContent({format:"html"}),a=a.replace(/\r\n|\n\r|\r|\n/g,"");this.shortcode.attr("data-motopress-content",a);this.saved=!0;CE.Resizer.myThis.updateBottomInHandleMiddle();CE.Resizer.myThis.updateSplitterHeight();
CE.Resizer.myThis.updateHandleMiddle()}},afterBlur:function(){this.contentObserver(this.editor.getContent({format:"html"}))},contentChanged:function(){parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntitySettingsChanged.NAME,new CE.SceneEvents.EntitySettingsChanged(this.shortcodeLabel,null))}})}(jQuery),function(c){CE.Controls("CE.CodeEditor",{},{openedContent:null," render":function(){this.shortcode.find(".row").removeClass("row").addClass(parent.CE.Iframe.myThis.gridObj.row["class"]);
this.shortcode.find("a").attr("tabindex",-1);CE.Resizer.myThis.updateAllHandles()},open:function(){var a=parent.CE.CodeModal.myThis.editor;parent.CE.CodeModal.currentShortcode=this.element;var b=this.shortcode.attr("data-motopress-content");"undefined"!==typeof b&&(b=b.replace(RegExp("\\[\\]","ig"),"["),null!==a&&a.setContent(b,{format:"html"}),parent.CE.CodeModal.myThis.content.val(parent.switchEditors._wp_Nop(b)));this.openedContent=b;parent.CE.CodeModal.myThis.saveHandler=this.proxy("saveHandler");
parent.CE.CodeModal.myThis.element.mpmodal("show")},saveHandler:function(a){a=parent.CE.CodeModal.myThis;a.switchVisual();var b=parent.CE.CodeModal.currentShortcode.control(CE.Controls),d=null!==a.editor?a.editor.getContent({format:"html"}):parent.switchEditors._wp_Autop(a.content.val());d.length?b.shortcode.attr("data-motopress-content",d):b.shortcode.removeAttr("data-motopress-content");this.openedContent!==d&&b.renderShortcode();a.element.mpmodal("hide")}})}(jQuery),function(c){CE.Tools=can.Construct({myThis:null},
{init:function(){CE.Tools.myThis=this},getEntityHandle:function(a,b){var d;b.is_row?(d=parent.MP.Utils.getEdgeRow(a),d=d.find("> .mpce-row-tools-wrapper > .mpce-row-panel > .mpce-panel-btn-settings")):b.is_clmn?(d=parent.MP.Utils.getEdgeSpan(a),d=d.find("> .mpce-clmn-tools-wrapper > .mpce-clmn-panel > .mpce-panel-btn-settings")):(d=a.control(CE.Controls),d=parent.MP.Utils.getEdgeSpan(d.isGrid?a:a.closest(".motopress-clmn")),d=d.find("> .motopress-block-content>.mpce-tools-wrapper>.mpce-object-panel>.mpce-panel-btn-settings"));
return d}})}(jQuery),function(c){CE.LayoutManager=can.Construct({detectRowLayout:function(a){a=parent.MP.Utils.getEdgeRow(a).children(".motopress-clmn").toArray();return c.map(a,function(a){return parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(a.classList))})},rearrangeSpans:function(a,b){if(JSON.stringify(this.detectRowLayout(a))!=JSON.stringify(b)){var d=parent.MP.Utils.getEdgeRow(a).children(".motopress-clmn");b&&d.length===b.length||(b=CE.DragDrop.myThis.getSpanSizeRules(d.length));
c.each(d,function(a,d){CE.Resizer.myThis.setSpanSize(c(d),b[a])})}},moveExcessSpans:function(a,b){var d=1==parent.MP.Utils.detectRowNestingLvl(a)?CE.DragDrop.myThis.rowHtml.clone():CE.DragDrop.myThis.rowInnerHtml.clone();CE.DragDrop.myThis.makeRowEditable(d);d.find(".motopress-filler-content").replaceWith(b);a.after(d);CE.DragDrop.myThis.addHandleMiddle(d);CE.LayoutManager.rearrangeSpans(d);CE.DragDrop.myThis.addHandleMiddle(d);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.makeDroppable();
CE.Resizer.myThis.updateSplittableOptions(d.find(".motopress-clmn"),null,null,"init");CE.Resizer.myThis.updateAllHandles()},editLayout:function(a,b){var d=CE.LayoutManager.detectRowLayout(a);if(d.length!==b.length)if(d.length>b.length)d=parent.MP.Utils.getEdgeRow(a).children(".motopress-clmn").slice(b.length),d.remove(".motopress-empty"),d=d.not(".motopress-empty"),d.length&&CE.LayoutManager.moveExcessSpans(a,d);else for(var d=b.length-d.length,c=parent.MP.Utils.getEdgeRow(a).children(".mpce-row-tools-wrapper"),
f=parent.MP.Utils.detectRowNestingLvl(a),g=0;g<d;g++){var l=1==f?CE.DragDrop.myThis.spanHtml.clone():CE.DragDrop.myThis.spanInnerHtml.clone();CE.DragDrop.myThis.makeEditable(l,null,!0);c.before(l)}CE.LayoutManager.rearrangeSpans(a,b);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.makeDroppable();CE.Resizer.myThis.updateSplittableOptions(a.find(".motopress-clmn"),null,null,"init");CE.Resizer.myThis.updateAllHandles();parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntityResized.NAME,
new CE.SceneEvents.EntityResized(CE.Grid.ENTITIES.ROW))},addColumnToRow:function(a,b,d){b||(b=1==parent.MP.Utils.detectRowNestingLvl(a)?CE.DragDrop.myThis.spanHtml.clone():CE.DragDrop.myThis.spanInnerHtml.clone());var e=parent.MP.Utils.getEdgeRow(a);"undefined"==typeof d&&(d=e.children(".motopress-clmn").length+1);var f=CE.LayoutManager.detectRowLayout(a);f.length>=parent.CE.Iframe.myThis.gridObj.row.col||(f=CE.DragDrop.myThis.getSpanSizeRules(f.length+1),1<d?e.children(".motopress-clmn").eq(d-2).after(b):
e.children(".motopress-clmn").eq(1).before(b),CE.DragDrop.myThis.makeEditable(b,null,!0),CE.LayoutManager.rearrangeSpans(a,f),CE.DragDrop.myThis.makeDroppable(),CE.Resizer.myThis.updateSplittableOptions(b,null,a),CE.Resizer.myThis.updateAllHandles(),c(window).trigger("resize"))},insertRow:function(a,b,d,c){d=d||"before";var f=this.generateStructure(a,c||1);switch(d){case "in":b.empty();b.append(f);break;default:b.before(f)}a=f.closest(".motopress-clmn");if(a.length){if(b=a.control(CE.Panels.EmptyColumnHelper))b.destroy(),
a.removeClass(CE.HelpersManager.myThis.emptyClmnClasses);CE.HelpersManager.myThis.addHelpers(a)}CE.DragDrop.myThis.makeRowEditable(f,!0);var g=setTimeout(function(){CE.DragDrop.myThis.addHandleMiddle(f);CE.DragDrop.myThis.resizer.updateHandle();CE.DragDrop.myThis.makeDroppable();CE.Resizer.myThis.updateSplittableOptions(f.find(".motopress-clmn"),null,null,"init");CE.Resizer.myThis.updateAllHandles();parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntityCreated.NAME,new CE.SceneEvents.EntityCreated(CE.Grid.ENTITIES.ROW));
clearTimeout(g)},0)},removeBlock:function(a){CE.Selectable.myThis.unselect();var b,d=parent.MP.Utils.getEntityTypeByElement(a);switch(d.name){case CE.Grid.ENTITIES.ROW:b=a.closest(".motopress-clmn").closest(".motopress-clmn").siblings(".motopress-clmn");this._removeRow(a);break;case CE.Grid.ENTITIES.COLUMN:b=a.siblings(".motopress-clmn");this._removeColumn(a);break;case CE.Grid.ENTITIES.WIDGET:b=a.closest(".motopress-clmn").siblings(".motopress-clmn"),this._removeWidget(a)}CE.Resizer.myThis.updateAllHandles();
c(window).trigger("resize");var e,f={involvedElements:{}};null!==b&&b.length&&b.find(".motopress-block-content > [data-motopress-shortcode]").each(function(){c(this).length&&(e=c(this).attr("data-motopress-shortcode"),f.involvedElements.hasOwnProperty(e)||(f.involvedElements[e]=[]),f.involvedElements[e].push(this))});c("body").trigger("MPCEObjectRemove",f);parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntityDeleted.NAME,new CE.SceneEvents.EntityDeleted(d.name))},_removeRow:function(a){var b=
a.parents(".motopress-row").first();b.closest(".motopress-content-wrapper").length||(b=null);a.find("[data-motopress-shortcode].ce_inline_editor").addBack().filter(".ce_inline_editor").each(function(){var a=c(this).control(CE.InlineEditor).child.attr("id");"undefined"!==typeof a&&(a=tinymce.get(a),"undefined"!==typeof a&&a.destroy())});a.children().remove();CE.DragDrop.myThis.clearIfEmpty(a,"remove");CE.DragDrop.myThis.isEmptyScene()&&(c(".motopress-handle-middle-in").remove(),CE.Utils.addSceneState("empty-scene"));
a=a.siblings(".motopress-row").length;null===b||a||CE.LayoutManager.rearrangeSpans(b)},_removeColumn:function(a){var b=a.closest(".motopress-row");a.find("[data-motopress-shortcode].ce_inline_editor").addBack().filter(".ce_inline_editor").each(function(){var a=c(this).control(CE.InlineEditor).child.attr("id");"undefined"!==typeof a&&(a=tinymce.get(a),"undefined"!==typeof a&&a.destroy())});a.remove();(a=CE.DragDrop.myThis.clearIfEmpty(b,"remove"))&&a.hasOwnProperty("row")?b=a.row:(a=CE.DragDrop.myThis.recalcRowSizes(b),
CE.LayoutManager.rearrangeSpans(b,a));CE.DragDrop.myThis.isEmptyScene()&&(c(".motopress-handle-middle-in").remove(),CE.Utils.addSceneState("empty-scene"));CE.Resizer.myThis.updateSplittableOptions(null,b,null)},_removeWidget:function(a){a=a.closest(".motopress-clmn");var b=a.find(".motopress-block-content > [data-motopress-shortcode]").first(),d=a.closest(".motopress-row");b.find("[data-motopress-shortcode].ce_inline_editor").addBack().filter(".ce_inline_editor").each(function(){var a=c(this).control(CE.InlineEditor).child.attr("id");
"undefined"!==typeof a&&(a=tinymce.get(a),"undefined"!==typeof a&&a.destroy())});"mp_space"===b.attr("data-motopress-shortcode")&&this._fixExSpacerSpan(a);b=(1===parent.MP.Utils.detectSpanNestingLvl(a)?CE.DragDrop.myThis.spanHtml.clone():CE.DragDrop.myThis.spanInnerHtml.clone()).find(".motopress-filler-content");CE.HelpersManager.myThis.destroySpanHelper(a);a.html(b);CE.HelpersManager.myThis.addHelpers(a);CE.DragDrop.myThis.makeDroppable();CE.Resizer.myThis.updateSplittableOptions(null,d,null)},insertWidgetToClmn:function(a,
b,d,e){e="undefined"!==typeof e?e:!1;d="undefined"!==typeof d?d:!1;b.children(".motopress-block-content").children(".motopress-filler-content, [data-motopress-shortcode]").replaceWith(a);"mp_space"===a.attr("data-motopress-shortcode")&&this._fixSpacerSpan(b);CE.DragDrop.myThis.initShortcodeController(a,e);e=a.control(CE.Controls);d&&e&&e.renderShortcode("created");if(d=b.control(CE.Panels.EmptyColumnHelper))if(d.destroy(),b.removeClass(CE.HelpersManager.myThis.emptyClmnClasses),d=b.attr("data-motopress-parameters"))if(d=
JSON.parse(d),e=parent.CE.Iframe.myThis.gridObj.span.custom_class_attr,d.hasOwnProperty(e)&&d[e].hasOwnProperty("value")){var f=c.trim(d[e].value).split(" "),f=c.grep(f,function(a){return-1==c.inArray(a,CE.HelpersManager.myThis.emptyClmnClasses.split(" "))});d[e].value=f.join(" ");b.attr("data-motopress-parameters",JSON.stringify(d))}new CE.Panels.ColumnHelper(b);CE.DragDrop.myThis.makeDroppable();CE.Resizer.myThis.updateSplittableOptions(b);CE.Resizer.myThis.updateAllHandles();return a},generateStructure:function(a,
b){var d=1==b?CE.DragDrop.myThis.rowHtml.clone():CE.DragDrop.myThis.rowInnerHtml.clone(),e=[],f,g;1==b?(f=CE.DragDrop.myThis.spanHtml,g=parent.CE.WidgetsLibrary.myThis.getAttrs("mp_grid",parent.CE.WidgetsLibrary.myThis.getGrid().span.shortcode)):(f=CE.DragDrop.myThis.spanInnerHtml,g=parent.CE.WidgetsLibrary.myThis.getAttrs("mp_grid",parent.CE.WidgetsLibrary.myThis.getGrid().span.inner));c.each(a,function(a,b){var d=f.clone();CE.Resizer.myThis.setSpanSize(d,b);CE.DragDrop.myThis.makeEditable(d,null,
!0,g);e.push(d)});CE.DragDrop.myThis.makeRowEditable(d);d.find(".motopress-filler-content").replaceWith(e);return d},duplicateBlock:function(a){CE.Selectable.myThis.unselect();var b,d,e=parent.MP.Utils.getEntityTypeByElement(a),f=null;e.is_row?b=parent.MP.Utils.detectRowNestingLvl(a):e.is_clmn?b=parent.MP.Utils.detectSpanNestingLvl(a):(b=a.closest(".motopress-clmn"),a=b.find(".motopress-block-content > [data-motopress-shortcode]").first(),b=parent.MP.Utils.detectSpanNestingLvl(b));d=a.clone();e.is_widget&&
(f=CE.Tools.myThis.getEntityHandle(a,e),f.addClass(CE.Shortcode.preloaderClass));d.find('[data-motopress-group="mp_grid"], .motopress-block-content > [data-motopress-shortcode]').addBack().each(function(){var a=c.parseJSON(c(this).attr("data-motopress-styles"));a.hasOwnProperty("mp_custom_style")&&a.mp_custom_style.hasOwnProperty("value")&&(a.mp_custom_style.value=CE.StyleEditor.myThis.changePrivateClassToDuplicated(a.mp_custom_style.value),c(this).attr("data-motopress-styles",JSON.stringify(a)))});
b=(new parent.CE.ContentParser(d,b)).content;this.insertShortcodeString(b,e,a).done(function(a){var b=c("body");a.find(".motopress-block-content > [data-motopress-shortcode]").each(function(){var a=c(this),d=a.closest(".motopress-clmn"),e,f,g={involvedElements:{},duplicatedElement:a};d.siblings(".motopress-clmn").each(function(){e=c(this).find(".motopress-block-content > [data-motopress-shortcode]").first();f=e.attr("data-motopress-shortcode");g.involvedElements.hasOwnProperty(f)||(g.involvedElements[f]=
[]);g.involvedElements[f].push(e[0])});b.trigger("MPCEObjectDuplicated",g)})}).always(function(){null!==f&&f.removeClass(CE.Shortcode.preloaderClass);parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntityDuplicated.NAME,new CE.SceneEvents.EntityDuplicated(e.name))})},insertShortcodeString:function(a,b,d,e){e=e?e:"after";var f=1;b.is_clmn?f=parent.MP.Utils.detectSpanNestingLvl(d):b.is_widget&&(f=parent.MP.Utils.detectSpanNestingLvl(d.closest(".motopress-clmn")));var g,l=c.Deferred();this.renderShortcodeString(a,
b,f).done(this.proxy(function(a){CE.ShortcodePrivateStyle.addRenderedStyleTags(a.privateStyleTags);switch(b.name){case CE.Grid.ENTITIES.WIDGET:g=this._insertRenderedWidget(a,d,e);break;case CE.Grid.ENTITIES.COLUMN:g=this._insertRenderedColumn(a,d,e);break;case CE.Grid.ENTITIES.ROW:case CE.Grid.ENTITIES.PAGE:g=this._insertRenderedRows(a,d,e)}c(window).trigger("resize");var f=c("body");g.find(".motopress-block-content > [data-motopress-shortcode]").each(function(){var a=c(this);f.trigger("MPCEObjectCreated",
[a,a.attr("data-motopress-shortcode")])});l.resolve(g)})).fail(function(){l.reject()});return l.promise()},_insertRenderedWidget:function(a,b,d){var c=b.closest(".motopress-clmn"),f=c.closest(".motopress-row"),g=parent.MP.Utils.getEdgeRow(f);"in"==d?(this.insertWidgetToClmn(a.content,b),a=b):(b=g.children(".motopress-clmn").index(c),"before"==d&&b--,b=CE.DragDrop.myThis.recalcRowSizes(f,{insertPosition:b}),b.length?(a=this._insertNewBlock(a.wrappedContent.find(".motopress-clmn:first"),c,d),CE.LayoutManager.rearrangeSpans(f,
b)):(a=this._insertNewBlock(a.wrappedContent,f,d),CE.LayoutManager.rearrangeSpans(a)));CE.DragDrop.myThis.main(a);"mp_space"===a.find(".motopress-block-content > [data-motopress-shortcode]").first().attr("data-motopress-shortcode")&&this._fixSpacerSpan(a,c);return a},_insertRenderedColumn:function(a,b,d){var c=b.closest(".motopress-row"),f=parent.MP.Utils.getEdgeRow(c).children(".motopress-clmn").index(b);"before"==d&&f--;f=CE.DragDrop.myThis.recalcRowSizes(c,{insertPosition:f});f.length?(a=this._insertNewBlock(a.content,
b,d),CE.LayoutManager.rearrangeSpans(c,f)):(a=this._insertNewBlock(a.wrappedContent,c,d),CE.LayoutManager.rearrangeSpans(a));CE.DragDrop.myThis.main(a);return a},_insertRenderedRows:function(a,b,d){a=this._insertNewBlock(a.content,b,d);CE.DragDrop.myThis.main(a);return a},_normalizeShortcodesStructure:function(a,b,d){b.is_clmn?(b=parent.CE.Iframe.myThis.getRowSlug(d),a="["+b+"]"+a+"[/"+b+"]"):b.is_widget&&(b=parent.CE.Iframe.myThis.getRowSlug(d),d=parent.CE.Iframe.myThis.getClmnSlug(d,1),a="["+b+
"]["+d.slug+d.attr+"]"+a+"[/"+d.slug+"][/"+b+"]");return a},renderShortcodeString:function(a,b,d){a=this._normalizeShortcodesStructure(a,b,d);var e=new c.Deferred;c.ajax({url:parent.motopress.ajaxUrl,type:"POST",dataType:"html",async:!0,data:{action:"motopress_ce_render_shortcodes_string",nonce:parent.motopressCE.nonces.motopress_ce_render_shortcodes_string,content:a,postID:parent.motopressCE.postID,type:b.name},success:function(a){var d=c(a);parent.CE.Iframe.myThis.unwrapGrid(d);var l=a=d.filter(".motopress-ce-rendered-content-wrapper").children();
b.is_clmn?l=a.find(".motopress-clmn:first"):b.is_widget&&(l=a.find(".motopress-clmn:first").find("[data-motopress-shortcode]:first"));d=d.filter(".motopress-ce-private-styles-updates-wrapper");e.resolve({content:l,wrappedContent:a,privateStyleTags:d})},error:function(a){a=c.parseJSON(a.responseText);c.isPlainObject(a)&&a.hasOwnProperty("message")&&(a.debug?console.log(a.message):(parent.MP.Flash.setFlash(a.message,"error"),parent.MP.Flash.showMessage()));e.reject()}});return e.promise()},_insertNewBlock:function(a,
b,d){a=c(a);switch(d?d:"after"){case "before":b.before(a);break;case "in":d=parent.MP.EntityType.initByEntity(b);d.is_clmn?b=parent.MP.Utils.getEdgeSpan(b):d.is_row&&(b=parent.MP.Utils.getEdgeRow(b));b.html(a);break;default:case "after":b.after(a)}CE.DragDrop.myThis.setEdges();return a},insertWidgetToPosition:function(a,b,d,e){var f=b.closest(".motopress-row"),g=null;if(!CE.DragDrop.myThis.canBeInserted(b,d))return!1;if(e)h=a;else{var l=CE.DragDrop.myThis.spanHtml.clone().find(".motopress-filler-content"),
h=CE.DragDrop.myThis.spanHtml.clone();h.find(".motopress-filler-content").replaceWith(a.find(".motopress-block-content").children());CE.DragDrop.myThis.resizer.setSpanSize(h,parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(a.prop("class").split(" "))))}switch(d){case "top-in":var k=CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(h).end();d=CE.DragDrop.myThis.spanHtml.clone().addClass(parent.MP.Utils.getSpanClass(b.prop("class").split(" ")));b.before(d);
var n=CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(b).end();d.find(".motopress-filler-content").replaceWith([k,n]);CE.DragDrop.myThis.makeRowEditable(k.add(n),e);CE.DragDrop.myThis.makeEditable(d,parent.CE.ShortcodeAtts.getAttrsFromElement(h),!0);var p=setTimeout(function(){CE.DragDrop.myThis.addHandleMiddle(n);CE.LayoutManager.rearrangeSpans(n);CE.LayoutManager.rearrangeSpans(k);clearTimeout(p)},0);break;case "bottom-in":k=CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(h).end();
d=CE.DragDrop.myThis.spanHtml.clone().addClass(parent.MP.Utils.getSpanClass(b.prop("class").split(" ")));b.before(d);n=CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(b).end();d.find(".motopress-filler-content").replaceWith([n,k]);CE.DragDrop.myThis.makeRowEditable(k.add(n),e);CE.DragDrop.myThis.makeEditable(d,parent.CE.ShortcodeAtts.getAttrsFromElement(a),!0);p=setTimeout(function(){CE.DragDrop.myThis.addHandleMiddle(n);CE.LayoutManager.rearrangeSpans(n);CE.LayoutManager.rearrangeSpans(k);
clearTimeout(p)},0);break;case "left-out":case "left":case "intermediate":var m=parent.MP.Utils.getEdgeRow(f).children(".motopress-clmn");d="left"===d?0:m.index(b);var q=CE.DragDrop.myThis.recalcRowSizes(f,{insertPosition:0>d?0:d});q.length&&(b.parent().length&&b.before(h),p=setTimeout(function(){CE.LayoutManager.rearrangeSpans(f,q);clearTimeout(p)},0));break;case "right-out":case "right":m=parent.MP.Utils.getEdgeRow(f).children(".motopress-clmn");d="right"===d?m.length:m.index(b)+1;q=CE.DragDrop.myThis.recalcRowSizes(f,
{insertPosition:d});q.length&&(b.parent().length&&b.after(h),p=setTimeout(function(){CE.LayoutManager.rearrangeSpans(f,q);clearTimeout(p)},0));break;case "left-in":m=parent.MP.Utils.getEdgeRow(f).children(".motopress-clmn");q=CE.DragDrop.myThis.recalcRowSizes(f,{wrapperPosition:m.index(b)});q.length&&(d=CE.DragDrop.myThis.spanHtml.clone().addClass(parent.MP.Utils.getSpanClass(b.prop("class").split(" "))),b.before(d),n=CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(b).end(),
d.find(".motopress-filler-content").replaceWith(n),b.before(h),CE.DragDrop.myThis.makeRowEditable(n,e),CE.DragDrop.myThis.makeEditable(d,parent.CE.ShortcodeAtts.getAttrsFromElement(CE.DragDrop.myThis.draggingElement),!0),p=setTimeout(function(){CE.DragDrop.myThis.addHandleMiddle(n);CE.LayoutManager.rearrangeSpans(f,q);CE.LayoutManager.rearrangeSpans(n);clearTimeout(p)},0));break;case "right-in":m=parent.MP.Utils.getEdgeRow(f).children(".motopress-clmn");q=CE.DragDrop.myThis.recalcRowSizes(f,{wrapperPosition:m.index(b)});
q.length&&(d=CE.DragDrop.myThis.spanHtml.clone().addClass(parent.MP.Utils.getSpanClass(b.prop("class").split(" "))),b.before(d),n=CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(b).end(),d.find(".motopress-filler-content").replaceWith(n),b.after(h),CE.DragDrop.myThis.makeRowEditable(n,e),CE.DragDrop.myThis.makeEditable(d,parent.CE.ShortcodeAtts.getAttrsFromElement(CE.DragDrop.myThis.draggingElement),!0),p=setTimeout(function(){CE.DragDrop.myThis.addHandleMiddle(n);
CE.LayoutManager.rearrangeSpans(f,q);CE.LayoutManager.rearrangeSpans(n);clearTimeout(p)},0));break;case "middle-in":var r=parseInt(b.css("min-height"));b.siblings(".motopress-handle-middle-in").add(this).each(function(){b.height(r)});CE.DragDrop.myThis.resetLastHandleMiddleHeight();f=b.parent(".motopress-content-wrapper").length?CE.DragDrop.myThis.rowHtml.clone().find(".motopress-filler-content").replaceWith(h).end():CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(h).end();
b.after(f);CE.DragDrop.myThis.makeRowEditable(f,e);p=setTimeout(function(){CE.LayoutManager.rearrangeSpans(f);CE.DragDrop.myThis.addHandleMiddle(f);clearTimeout(p)},0);break;case "before":CE.DragDrop.myThis.resetLastHandleMiddleHeight();f=b.parent(".motopress-content-wrapper").length?CE.DragDrop.myThis.rowHtml.clone().find(".motopress-filler-content").replaceWith(h).end():CE.DragDrop.myThis.rowInnerHtml.clone().find(".motopress-filler-content").replaceWith(h).end();b.before(f);CE.DragDrop.myThis.makeRowEditable(f,
e);p=setTimeout(function(){CE.LayoutManager.rearrangeSpans(f);CE.DragDrop.myThis.addHandleMiddle(f);clearTimeout(p)},0);break;case "insert":d=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(b.attr("class").split(" "))),g=parent.CE.ShortcodeAtts.getAttrsFromElement(a),b.parent().length&&b.replaceWith(h),CE.DragDrop.myThis.resizer.setSpanSize(h,d)}"mp_space"===h.find("[data-motopress-shortcode]").attr("data-motopress-shortcode")&&this._fixSpacerSpan(h,a);CE.DragDrop.myThis.makeEditable(h,
null,!0,g);e||(CE.HelpersManager.myThis.destroySpanHelper(a),"mp_space"===h.find("[data-motopress-shortcode]").attr("data-motopress-shortcode")&&this._fixExSpacerSpan(a),a.html(l),CE.HelpersManager.myThis.addHelpers(a));CE.DragDrop.myThis.$droppedSpan=h;var t=setTimeout(this.proxy(function(){var b=a.closest(".motopress-row");CE.DragDrop.myThis.makeDroppable();CE.Resizer.myThis.updateSplittableOptions(h,b,f);CE.Resizer.myThis.updateAllHandles();c(window).trigger("resize");this._apiTriggerDrop(h,b,
f);this._dispatchMovedEvent(h);clearTimeout(t)},0));return!0},_fixSpacerSpan:function(a,b){a.addClass(CE.DragDrop.myThis.spaceClass);b&&b.attr("style")&&b.attr("style").match(/min-height:\s(\d+px)/)&&a.css("min-height",b.attr("style").match(/min-height:\s(\d+px)/)[1])},_fixExSpacerSpan:function(a){a.removeClass(CE.DragDrop.myThis.spaceClass);a.attr("style")&&a.attr("style",a.attr("style").replace(/min-height:\s(\d+px)[;]?/,""))},_apiTriggerDrop:function(a,b,d){var e,f={involvedElements:{}};f.droppedElement=
a;b&&b.length&&(a=b.find(".motopress-block-content > [data-motopress-shortcode]"),a.length&&a.each(function(){e=c(this).attr("data-motopress-shortcode");f.involvedElements.hasOwnProperty(e)||(f.involvedElements[e]=[]);-1===c.inArray(this,f.involvedElements[e])&&f.involvedElements[e].push(this)}));d&&d.length&&(a=d.find(".motopress-block-content > [data-motopress-shortcode]"),a.length&&a.each(function(){e=c(this).attr("data-motopress-shortcode");f.involvedElements.hasOwnProperty(e)||(f.involvedElements[e]=
[]);-1===c.inArray(this,f.involvedElements[e])&&f.involvedElements[e].push(this)}));CE.DragDrop.myThis.bodyEl.trigger("MPCEObjectDrop",f)},_dispatchMovedEvent:function(a){a=a.find(".motopress-block-content > [data-motopress-shortcode]").control(CE.Shortcode);parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntityMoved.NAME,new CE.SceneEvents.EntityMoved(a?a.shortcodeLabel:null))}},{})}(jQuery),function(c){CE.Resizer=can.Construct({myThis:null},{minWidth:8,handle:null,emptySpan:null,gridColumnSizeClassesString:"",
splitter:c("<div />",{"class":"motopress-splitter"}),emptySpanNumber:0,resizeWindowTimer:null,bodyEl:c("body"),setup:function(){this.setGridColumnSizeClassesString();this.setEmptySpan()},init:function(){CE.Resizer.myThis=this;this.events()},_destroy:function(){c(window).off("resize.CE.Resizer")},clone:function(a){var b=this;a.find(".motopress-splitter").each(function(){var a=b.splitter.clone(),e=c(this).attr("style");c(this).replaceWith(a);a.attr("style",e)})},restoreClone:function(a){var b=this;
a.find(".motopress-splitter").each(function(){c(this).removeData("uiDraggable");b.makeSplittable(c(this))});this.updateAllHandles()},events:function(){c(window).on("resize.CE.Resizer",function(a){parent.CE.Iframe.myThis.setSceneWidth();a.target===this&&CE.Resizer.myThis.proxy("updateHandle");CE.Resizer.myThis.resizeWindowTimer&&clearTimeout(CE.Resizer.myThis.resizeWindowTimer);CE.Resizer.myThis.resizeWindowTimer=setTimeout(function(){parent.MP.Editor.triggerIfr("Resize")},500)});parent.MP.Editor.onIfr("Resize",
function(a){CE.Resizer.myThis.updateAllHandles()});parent.CE.EventDispatcher.Dispatcher.addListener(CE.SceneEvents.InlineEditorOpened.NAME,this.hideSplitters);parent.CE.EventDispatcher.Dispatcher.addListener(CE.SceneEvents.InlineEditorClosed.NAME,this.showSplitters)},setGridColumnSizeClassesString:function(){for(var a=[],b=1;b<=parent.CE.Iframe.myThis.gridObj.row.col;b++)a.push(parent.CE.Iframe.myThis.gridObj.span["class"]+b);this.gridColumnSizeClassesString=a.join(" ")},setEmptySpan:function(){var a=
c(parent.motopressCE.rendered_shortcodes.empty[parent.CE.Iframe.myThis.gridObj.span.shortcode]);CE.Scene.markEdgeSpan(a,!0);a.removeClass(this.gridColumnSizeClassesString);var b=parent.CE.Iframe.myThis.gridObj.span.shortcode;parent.CE.WidgetsLibrary.myThis.setAttrs(a,parent.CE.WidgetsLibrary.myThis.getGroup("mp_grid").id,parent.CE.WidgetsLibrary.myThis.getObject("mp_grid",b));this.emptySpan=a},getMinChildColumn:function(a){var b=CE.Grid.myThis.columnCount;a.find(".motopress-clmn").each(function(){var a=
parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(c(this).prop("class").split(" ")));a<b&&(b=a)});return b},isAllowedColSize:function(a,b){return 0<=b/100*CE.Grid.myThis.colWidthByNumber[a]-2*CE.Grid.myThis.padding},makeSplittable:function(a){if(!a.length)return!1;var b=this;a=a.hasClass("motopress-splitter")?a:a.find(".motopress-splitter");var d,e;a.hasClass("ui-draggable")||a.draggable({axis:"x",cursor:"col-resize",grid:[1,0],helper:"clone",zIndex:1,start:function(a,g){CE.Utils.addSceneAction("split");
g.helper.hide();b.hideSplitters(c(this));CE.DragDrop.myThis.resetLastHandleMiddleHeight();d=null;e=!1;CE.LeftBar.myThis.disable();c(this).addClass("motopress-splitter-hover");parent.CE.Panels.SettingsDialog.myThis.close();var l=g.helper.closest(".motopress-row"),h=parent.MP.Utils.getEdgeRow(l).width()/100,k=c(this).closest(".motopress-clmn"),l=k.prev(".motopress-clmn"),n=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(k.prop("class").split(" "))),p=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(l.prop("class").split(" "))),
m=l.offset().left;if(l.is("[data-motopress-wrapper-id]"))var q=b.getMinChildColumn(l);if(k.is("[data-motopress-wrapper-id]"))var r=b.getMinChildColumn(k);for(var t=n+p-1,u=[],s=1;s<=t;s++)u[s]=h*CE.Grid.myThis.colWidthByNumber[s];for(var h=u.slice(),v,s=1;s<p;s++)0>u[s]-2*CE.Grid.myThis.padding?u[s]=-1*(m+u[s]):(v=1,t=Math.abs(u[s]),0<u[s]&&l.is("[data-motopress-wrapper-id]")&&(b.isAllowedColSize(q,t)||(v=-1)),u[s]=(m+u[s])*v);q=p-1;for(s=n;1<=s;s--)q++,0>h[s]-2*CE.Grid.myThis.padding?u[q]=-1*(m+
u[q]):(v=1,t=h[s],0<h[s]&&k.is("[data-motopress-wrapper-id]")&&(b.isAllowedColSize(r,t)||(v=-1)),u[q]=(m+u[q])*v);c(this).data("mp-snap-grid",u);b.currentI=p;b.curSplitterArea="";var w,x={involvedElements:{}};k.length&&(r=k.find(".motopress-block-content > [data-motopress-shortcode]"),r.length&&r.each(function(){w=c(this).attr("data-motopress-shortcode");x.involvedElements.hasOwnProperty(w)||(x.involvedElements[w]=[]);x.involvedElements[w].push(this)}));l.length&&(r=l.find(".motopress-block-content > [data-motopress-shortcode]"),
r.length&&r.each(function(){w=c(this).attr("data-motopress-shortcode");x.involvedElements.hasOwnProperty(w)||(x.involvedElements[w]=[]);x.involvedElements[w].push(this)}));c("body").trigger("MPCEObjectSplitStart",x)},stop:function(a,d){CE.Utils.removeSceneAction("split");CE.LeftBar.myThis.enable();b.showSplitters();c(this).removeClass("motopress-splitter-hover");var l=c(this).closest(".motopress-clmn"),h=l.prev(".motopress-clmn");CE.Resizer.myThis.updateSplittableOptions(l,null,null,"split");var k=
CE.Resizer.myThis.updateAllHandles();e&&(void 0).length&&(void 0).remove();k.done(function(){parent.CE.EventDispatcher.Dispatcher.dispatch(CE.SceneEvents.EntityResized.NAME,new CE.SceneEvents.EntityResized(CE.Grid.ENTITIES.COLUMN));var a,b,d={involvedElements:{}};l.length&&(a=l.find(".motopress-block-content > [data-motopress-shortcode]"),a.length&&a.each(function(){b=c(this).attr("data-motopress-shortcode");d.involvedElements.hasOwnProperty(b)||(d.involvedElements[b]=[]);d.involvedElements[b].push(this)}));
h.length&&(a=h.find(".motopress-block-content > [data-motopress-shortcode]"),a.length&&a.each(function(){b=c(this).attr("data-motopress-shortcode");d.involvedElements.hasOwnProperty(b)||(d.involvedElements[b]=[]);d.involvedElements[b].push(this)}));c("body").trigger("MPCEObjectSplitStop",d)})},drag:function(a,g){var l=!1,h=g.offset.left-CE.Grid.myThis.padding/2;null===d&&(d=h);if(h!==d){var k=c(this).closest(".motopress-clmn"),n=null,p=k.closest(".motopress-row-edge").width(),m,q,r=c(this).data("mp-snap-grid"),
t=r.length-1,u=CE.LeftBar.myThis.getSpace();1<t?(m=Math.abs(r[2])-Math.abs(r[1]),q=Math.abs(r[t])-Math.abs(r[t-1])):m=q=p/100*CE.Grid.myThis.colWidthByNumber[1];m>CE.Grid.myThis.padding&&(m-=CE.Grid.myThis.padding);m>CE.Grid.myThis.padding&&(m-=CE.Grid.myThis.padding);q>CE.Grid.myThis.padding&&(q-=CE.Grid.myThis.padding);m=a.pageX<=u+2||h<=Math.abs(r[1])-m;q=a.pageX>=c(document).width()-2||h>=Math.abs(r[t])+1.5*q;if(m||q){if(m&&"left"===b.curSplitterArea||q&&"right"===b.curSplitterArea)return;n=k.prev(".motopress-clmn");
h=parent.MP.Utils.getSpanClass(k.prop("class").split(" "));p=parent.MP.Utils.getSpanClass(n.prop("class").split(" "));h=parent.MP.Utils.getSpanNumber(h);p=parent.MP.Utils.getSpanNumber(p);if(m)for(b.curSplitterArea="left",h=0,m=1;m<=t;m++){if(0<r[m]){h=m;break}}else for(b.curSplitterArea="right",h=0,m=t;1<=m;m--)if(0<r[m]){h=m;break}h&&(CE.Resizer.myThis.setSpanSize(k,t+1-h),CE.Resizer.myThis.setSpanSize(n,h),b.currentI=h,c(window).trigger("resize"),l=!0)}else for(b.curSplitterArea="center",u=h<d?
-1:1,q=!1,m=1;m<=t;m++)if(!(0>=r[m])&&(q=!1,q=1<t?1===m?Math.abs(r[m+1])-Math.abs(r[m]):m==t?Math.abs(r[m])-Math.abs(r[m-1]):0>u?Math.abs(r[m])-Math.abs(r[m-1]):Math.abs(r[m+1])-Math.abs(r[m]):p/100*CE.Grid.myThis.colWidthByNumber[1])&&(q=Math.abs(q)/2,h>=r[m]-q/2&&h<=r[m]+q&&(q=m-b.currentI,e=!1,0!==q))){k=c(this).closest(".motopress-clmn");n=k.prev(".motopress-clmn");h=parent.MP.Utils.getSpanClass(k.prop("class").split(" "));p=parent.MP.Utils.getSpanClass(n.prop("class").split(" "));p=parent.MP.Utils.getSpanClass(n.prop("class").split(" "));
h=parent.MP.Utils.getSpanNumber(h);p=parent.MP.Utils.getSpanNumber(p);l=p+q;CE.Resizer.myThis.setSpanSize(k,h-q);CE.Resizer.myThis.setSpanSize(n,l);b.currentI=m;c(window).trigger("resize");l=!0;break}k&&k.length&&(r=parseInt(k.css("margin-top"))+parseInt(k.css("border-top-width")),t=c(this).closest(".motopress-row").height(),c(this).css({top:-r,height:t}),e&&a.preventDefault());if(l){CE.Resizer.myThis.updateSplitterHeight();var s,v={involvedElements:{}};k&&k.length&&(k=k.find(".motopress-block-content > [data-motopress-shortcode]"),
k.length&&k.each(function(){s=c(this).attr("data-motopress-shortcode");v.involvedElements.hasOwnProperty(s)||(v.involvedElements[s]=[]);v.involvedElements[s].push(this)}));n&&n.length&&(k=n.find(".motopress-block-content > [data-motopress-shortcode]"),k.length&&k.each(function(){s=c(this).attr("data-motopress-shortcode");v.involvedElements.hasOwnProperty(s)||(v.involvedElements[s]=[]);v.involvedElements[s].push(this)}));c("body").trigger("MPCEObjectSplit",v)}}}})},calcSplitterOptions:function(a,b){var d=
null,e=null,f=null;if("column"===b)e=a.parent(".motopress-row-edge").width(),d=a;else if("row"===b)d=parent.MP.Utils.getEdgeRow(a),e=d.width(),d=d.children(".motopress-clmn");else return!1;d.each(function(){f=parent.MP.Utils.getEdgeSpan(c(this)).children(".motopress-splitter");CE.Resizer.myThis.makeSplittable(f)});if(!CE.Grid.myThis.padding){var g=-(10+e/100*CE.Grid.myThis.columnMarginPiece)/2;d.each(function(){f=parent.MP.Utils.getEdgeSpan(c(this)).children(".motopress-splitter");f.css("margin-left",
g-parseInt(c(this).css("border-left-width")))})}},updateSplittableOptions:function(a,b,d,e){"undefined"===typeof e&&(e="default");"init"===e||"split"===e?(b=null,"init"===e?b=parent.MP.Utils.findRows():"split"===e&&(a=a.parents(".motopress-row, .motopress-content-wrapper").eq(-2),"undefined"!==typeof a&&(b=parent.MP.Utils.findRows(a).add(a))),b&&"undefined"!==typeof b&&c.each(b,function(){CE.Resizer.myThis.calcSplitterOptions(c(this),"row")})):(a&&this.calcSplitterOptions(a,"column"),b&&c.each(parent.MP.Utils.findRows(b).add(b),
function(){CE.Resizer.myThis.calcSplitterOptions(c(this),"row")}),d&&c.each(parent.MP.Utils.findRows(d).add(d),function(){CE.Resizer.myThis.calcSplitterOptions(c(this),"row")}))},getSpanIndentForRow:function(a){a=parent.MP.Utils.getEdgeRow(a);return CE.Grid.myThis.padding?2*CE.Grid.myThis.padding:a.width()/100*CE.Grid.myThis.columnMarginPiece},updateSplitterHeight:function(){var a=can.Deferred(),b=setTimeout(this.proxy(function(){c.each(parent.MP.Utils.findRows(),this.proxy(function(a,b){b=c(b);var f=
parent.MP.Utils.getEdgeRow(b),g=this.getSpanIndentForRow(b),l=f.outerHeight();f.children(".motopress-clmn").each(function(){var a=c(this),b=parent.MP.Utils.getEdgeSpan(a),d=CE.Grid.myThis.padding&&a.is("[data-motopress-wrapper-id]")?g/2:g,b=b.offset().top-f.offset().top+parseFloat(b.css("border-top-width"));a.find(".motopress-splitter").css({height:l,top:-b});a.find(".motopress-handle-intermediate").css({width:g,height:l,top:-b,left:-d-parseInt(a.css("border-left-width"))})})}));a.resolve();clearTimeout(b)}),
50);return a},hideSplitters:function(a){a="undefined"===typeof a?a=!1:a;var b=c(".motopress-content-wrapper .motopress-clmn .motopress-splitter");a?b.not(a).addClass("motopress-hide"):b.addClass("motopress-hide")},showSplitters:function(){c(".motopress-content-wrapper .motopress-clmn .motopress-splitter").removeClass("motopress-hide")},calculateRowGap:function(a,b){var d=0,c=parent.MP.Utils.getEdgeRow(a);if(!a.is(c))switch(b){case "top":d+=c.offset().top-a.offset().top;break;case "bottom":var f=a.offset().top+
a.outerHeight(),g=c.offset().top+c.outerHeight(),d=d+(f-g);break;case "left":d+=c.offset().left-a.offset().left;break;case "right":f=a.offset().left+a.outerWidth(),g=c.offset().left+c.outerWidth(),d+=f-g}d+=parseFloat(c.css("padding-"+b));return d+=parseFloat(c.css("border-"+b+"-width"))},updateHandle:function(){var a=can.Deferred(),b=setTimeout(function(){if(!CE.DragDrop.myThis.isEmptyScene()){var d=c(".motopress-content-wrapper > .motopress-row:first"),e=d.offset(),f=parseFloat(d.css("margin-left")),
g=c(".motopress-content-wrapper > .motopress-row:last"),l=CE.LeftBar.myThis.getSpace(),h=e.left-l;c(".motopress-content-wrapper > .motopress-row").each(function(){var a=c(this),b=a.outerHeight();parent.MP.Utils.getEdgeRow(a).children(".motopress-clmn:first, .motopress-clmn:last").each(function(){var d=c(this),e=parent.MP.Utils.getEdgeSpan(d),f=e.offset().top-a.offset().top+parseFloat(e.css("border-top-width"));d.children(".motopress-wrapper-helper, .motopress-overlay").each(function(){var a=c(this).hasClass("motopress-wrapper-helper");
c(this).find(".motopress-handle-left, .motopress-handle-right").each(function(){var d=c(this).hasClass("motopress-handle-left")?"left":"right",g=parseFloat(e.css("border-"+d+"-width")),h="left"===d?e.offset().left-l:c(window).width()-e.offset().left-e.outerWidth(),k=h+g+CE.Grid.myThis.padding;0>=Math.floor(k)&&(k=25,h=0);k={top:-f,width:k,height:b};k[d]=-(a?h+g:h+g+CE.Grid.myThis.padding);c(this).css(k)})})})});var k=c("html"),n=c(document),p=n.width()-l,m=c(".motopress-content-wrapper > .motopress-handle-middle-in:first"),
q=c(".motopress-content-wrapper > .motopress-handle-middle-in:last"),r=q.prevAll(".motopress-handle-middle-in:first");r[0]!==m[0]&&r.css({width:"",left:"",height:"","margin-top":""});var r=n.height(),t=parseInt(k.css("top")),k=r-q.offset().top;r<t+n.outerHeight(!0)&&(k+=t);g=parseInt(g.css("margin-bottom"));Math.abs(parseInt(q.css("margin-top")))!==g&&(k+=g);d=parseInt(d.css("margin-top"));m.css({width:p,height:e.top,top:d-e.top,left:-h+f,"margin-top":""});q.css({width:p,left:-h+f,height:k,"margin-top":-g})}a.resolve();
clearTimeout(b)},50);return a},updateBottomInHandleMiddle:function(){var a=can.Deferred(),b=setTimeout(function(){CE.DragDrop.myThis.isEmptyScene()||c(".motopress-content-wrapper > .motopress-row").each(function(){CE.Resizer.myThis.setHandleHeight(c(this))});a.resolve();clearTimeout(b)},50);return a},setHandleHeight:function(a){var b=parseInt(a.find(".motopress-handle-middle-in:last").css("min-height"));a.find(".motopress-handle-middle-in").each(function(){c(this).height(b)});parent.MP.Utils.getEdgeRow(a).children(".motopress-clmn").each(function(){var b=
c(this),e=parent.MP.Utils.getEdgeSpan(b),f=e.width(),g=e.children(".motopress-row"),l=a.is(a.parent().children(".motopress-row:last"))?0:5,h=a.is(a.parent().children(".motopress-row:first"))?0:5,k=e.offset().top+e.outerHeight(),n=a.offset().top+a.outerHeight();g.length?(h=e.children(".motopress-handle-middle-in:last"),b=n-k,l=h.prev(".motopress-row"),l=l.offset().top+l.outerHeight(),k=parseFloat(h.css("min-height")),h.css({bottom:-b+k,height:n-l,width:f}),n=e.children(".motopress-handle-middle-in:first"),
h=parseFloat(e.css("padding-top")),b=parseFloat(e.css("border-top")),e=e.offset().top-a.offset().top,l=parseFloat(n.css("min-height")),n.css({top:-e-b,height:e+b+h+l,width:f}),g.each(function(){CE.Resizer.myThis.setHandleHeight(c(this))})):(f=b.find(".motopress-handle-bottom-in"),g=parseFloat(f.css("min-height")),k=e.offset().top+e.outerHeight(),n=a.offset().top+a.outerHeight(),n=k-n,f.css({bottom:l+n,height:g-n+parseFloat(e.css("border-bottom-width"))}),f=e.offset().top-a.offset().top,g=b.find(".motopress-handle-top-in"),
n=parseInt(g.css("min-height")),g.css({top:h-f,height:n+f+parseFloat(e.css("border-top-width"))}))})},updateHandleMiddle:function(){var a=can.Deferred(),b=setTimeout(function(){c('.motopress-content-wrapper > .motopress-handle-middle-in:not(":first, :last"), .motopress-content-wrapper .motopress-row-edge > .motopress-clmn .motopress-handle-middle-in:not(":first, :last")').each(function(){var a=c(this),b=a.prev(".mpce-wp-more-tag").length?a.prev(".mpce-wp-more-tag").prev(".motopress-row"):a.prev(".motopress-row"),
f=a.next(".motopress-row"),b=b.length?parseInt(b.css("margin-bottom")):0,g=f.length?parseInt(f.css("margin-top")):0,f=-b-5,b=Math.max(b,g)+10,g={};g.width=a.parent(".motopress-clmn-edge, .motopress-content-wrapper").width();0<b?(g["margin-top"]=f,g.height=b):(g["margin-top"]="",g.height="");g.bottom="";a.css(g)});c(".motopress-content-wrapper > .motopress-handle-middle-in:first, .motopress-content-wrapper > .motopress-handle-middle-in:last").css({"margin-left":"","margin-right":""});a.resolve();clearTimeout(b)},
70);return a},changeSpanClass:function(a,b){if(parent.CE.Iframe.myThis.gridObj.span.type&&"multiple"===parent.CE.Iframe.myThis.gridObj.span.type&&"undefined"!==typeof a.attr("data-motopress-shortcode")){var d=parent.MP.Utils.getSpanNumber(b);a.attr("data-motopress-shortcode",parent.CE.Iframe.myThis.gridObj.span.shortcode[d-1])}b===parent.CE.Iframe.myThis.gridObj.span.minclass&&(b+=" motopress-clmn-min");a.removeClass(this.gridColumnSizeClassesString+" motopress-clmn-min").addClass(b)},setSpanSize:function(a,
b){this.changeSpanClass(a,b?parent.CE.Iframe.myThis.gridObj.span["class"]+b:"")},updateAllHandles:function(){return can.when(CE.Resizer.myThis.updateBottomInHandleMiddle(),CE.Resizer.myThis.updateSplitterHeight(),CE.Resizer.myThis.updateHandle(),CE.Resizer.myThis.updateHandleMiddle())}})}(jQuery),function(c){can.Construct.extend("CE.HelpersManager",{myThis:null},{emptyClmnClasses:"motopress-empty mp-hidden-phone",init:function(){CE.HelpersManager.myThis=this},addHelpers:function(a){var b=this;a.each(function(){var a=
c(this),e=parent.MP.Utils.getEdgeSpan(a);e.children(".motopress-filler-content").length&&a.addClass(b.emptyClmnClasses);b.wrapIntoBlockContent(a);if(b.hasHelpers(a))return!0;parent.MP.Utils.isSpanWrapper(a)?(a.attr("data-motopress-wrapper-id",CE.Panels.WrapperColumnHelper.getNextWrapperId()),CE.DragDrop.myThis.setCalcWrapperWidth(e.children(".motopress-handle-middle-in")),new CE.Panels.WrapperColumnHelper(a)):a.hasClass("motopress-empty")?new CE.Panels.EmptyColumnHelper(a):new CE.Panels.ColumnHelper(a)})},
destroySpanHelper:function(a){a.each(function(){var a=c(this).control(CE.Panels.BaseColumnHelper);a&&a.destroy()})},addHelpersToRow:function(a){new CE.Panels.RowHelper(a)},hasHelpers:function(a){return a.hasClass("motopress-row")?this.hasRowHelpers(a):this.hasSpanHelpers(a)},hasRowHelpers:function(a){return parent.MP.Utils.getEdgeRow(a).children(".mpce-row-tools-wrapper").length},hasSpanHelpers:function(a){return 0!==parent.MP.Utils.getEdgeSpan(a).children(".motopress-splitter").length},wrapIntoBlockContent:function(a){var b=
parent.MP.Utils.getEdgeSpan(a);parent.MP.Utils.isSpanWrapper(a)||b.children(".motopress-block-content").length||(b.find("script").remove().end().wrapInner(CE.DragDrop.myThis.blockContent.clone()),a=b.find(".motopress-block-content"),new CE.Panels.WidgetHelper(a),a.children(":not(.mpce-widget-tools-wrapper)").length||a.append("<div />"))}})}(jQuery),can.view.stache("rowPanel",'<ul class="mpce-object-panel mpce-row-panel">\n<li class="mpce-panel-btn-settings mpce-panel-btn"><i class="fa fa-cog"></i><span class="mpce-panel-btn-tooltip">Section Settings</span></li>\n<li class="mpce-panel-btn-columns mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-columns"></i><span class="mpce-panel-btn-tooltip">Manage Columns</span></li>\n<li class="mpce-panel-btn-add mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-plus"></i><span class="mpce-panel-btn-tooltip">Add Section Before</span></li>\n<li class="mpce-panel-btn-duplicate mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-clone"></i><span class="mpce-panel-btn-tooltip">Duplicate Section</span></li>\n<li class="mpce-panel-btn-delete mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-trash"></i><span class="mpce-panel-btn-tooltip">Delete Section</span></li>\n<li class="mpce-panel-btn-save mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-save"></i><span class="mpce-panel-btn-tooltip">Save to Library</span></li>\n</ul>'),
can.view.stache("columnPanel",'<ul class="mpce-object-panel mpce-clmn-panel">\n<li class="mpce-panel-btn-duplicate mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-clone"></i><span class="mpce-panel-btn-tooltip">Duplicate Column</span></li>\n<li class="mpce-panel-btn-delete mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-trash"></i><span class="mpce-panel-btn-tooltip">Delete Column</span></li>\n<li class="mpce-panel-btn-add mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-plus"></i><span class="mpce-panel-btn-tooltip">Add Column</span></li>\n<li class="mpce-panel-btn-settings mpce-panel-btn"><i class="fa fa-columns"></i><span class="mpce-panel-btn-tooltip">Column Settings</span></li>\n</ul>'),
can.view.stache("widgetPanel",'<ul class="mpce-object-panel mpce-widget-panel">\n<li class="mpce-panel-btn-settings mpce-panel-btn"><i class="fa fa-edit"></i><span class="mpce-panel-btn-tooltip">Widget Settings</span></li>\n<li class="mpce-panel-btn-drag mpce-drag-handle mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-arrows"></i><span class="mpce-panel-btn-tooltip">Drag and Drop</span></li>\n<li class="mpce-panel-btn-duplicate mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-clone"></i><span class="mpce-panel-btn-tooltip">Duplicate Widget</span></li>\n<li class="mpce-panel-btn-delete mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-trash"></i><span class="mpce-panel-btn-tooltip">Delete Widget</span></li>\n<li class="mpce-panel-btn-save mpce-panel-btn mpce-panel-btn-secondary"><i class="fa fa-save"></i><span class="mpce-panel-btn-tooltip">Save to Libary</span></li>\n</ul>'),
function(c){can.Control.extend("CE.Panels.BaseObjectHelper",{retrieveHelpersContainer:function(a){return a}},{helpersContainer:null,helpers:null,toolsWrapper:null,toolsWrapperTag:"span",setup:function(a,b){b||(b={});b.helpersContainer=this.constructor.retrieveHelpersContainer(a);b=c.extend({toolsWrapperTag:"span"},b);return this._super(a,b)},init:function(a,b){this.helpersContainer=b.helpersContainer;this.initHelpers();this.insertHelpers()},restoreClone:function(a){this.element=a},initHelpers:function(){this.initToolsWrapper();
this.helpers=[this.toolsWrapper]},initToolsWrapper:function(){this.toolsWrapper=c("<"+this.options.toolsWrapperTag+"/>",{"class":"mpce-tools-wrapper"})},insertHelpers:function(){this.helpersContainer.append(this.helpers)},removeHelpers:function(){c.map(this.helpers,function(a,b){a.remove()})},destroy:function(){this.removeHelpers();this._super()},"{helpersContainer} >.mpce-tools-wrapper mouseenter":function(a,b){c("body").is(".motopress-drag-action")||this.element.addClass("motopress-selected")},
"{helpersContainer} >.mpce-tools-wrapper mouseleave":function(a,b){this.element.removeClass("motopress-selected")},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-delete click":function(a,b){b.preventDefault();b.stopPropagation();CE.LayoutManager.removeBlock(this.element)},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-duplicate click":function(a,b){b.preventDefault();b.stopPropagation();CE.LayoutManager.duplicateBlock(this.element)}})}(jQuery),function(c){CE.Panels.BaseObjectHelper("CE.Panels.BaseColumnHelper",
{retrieveHelpersContainer:function(a){return parent.MP.Utils.getEdgeSpan(a)}},{init:function(a,b){this._super(a,b);CE.DragDrop.myThis.resizer.makeSplittable(this.element)},initToolsWrapper:function(){this._super();this.toolsWrapper.addClass("mpce-clmn-tools-wrapper").append(CE.DragDrop.myThis.focusArea.clone(),can.view("columnPanel")());CE.DragDrop.myThis.setCalcWrapperWidth(this.toolsWrapper)},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-settings click":function(a,b){b.preventDefault();
b.stopPropagation();CE.Selectable.myThis.select(a)},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-add click":function(a,b){var d=this.element.closest(".motopress-row"),c=d.children(".motopress-clmn").index(this.element)+1;CE.LayoutManager.addColumnToRow(d,null,c+1)},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-move-right click":function(a,b){var d=this.element.next(".motopress-clmn");d.length&&d.after(this.element)},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-move-left click":function(a,
b){var d=this.element.prev(".motopress-clmn");d.length&&d.before(this.element)}})}(jQuery),function(c){CE.Panels.BaseColumnHelper("CE.Panels.SimpleColumnHelper",{},{initToolsWrapper:function(){this._super();this.toolsWrapper.prepend(c("<div />",{"class":"mpce-btn-add-row",html:"+",title:"Add Column"}))},"{helpersContainer} > .mpce-tools-wrapper .mpce-btn-add-row click":function(a,b){var d=CE.DragDrop.myThis.spanInnerHtml.clone();CE.LayoutManager.insertWidgetToPosition(d,this.element,"bottom-in",!0)}})}(jQuery),
function(c){CE.Panels.SimpleColumnHelper("CE.Panels.EmptyColumnHelper",{},{overlay:null,splitter:null,initHelpers:function(){this._super();this.initOverlay();this.initSplitter();this.helpers.push(this.overlay,this.splitter)},initSplitter:function(){this.splitter=CE.Resizer.myThis.splitter.clone()},initOverlay:function(){this.overlay=c("<div />",{"class":"motopress-overlay"});this.overlay.append(CE.DragDrop.myThis.handles.intermediate.clone(),CE.DragDrop.myThis.handles.left.clone(),CE.DragDrop.myThis.handles.right.clone(),
CE.DragDrop.myThis.handles.insert.clone());CE.DragDrop.myThis.setCalcWrapperWidth(this.overlay);CE.Grid.myThis.padding&&this.overlay.css("left",CE.Grid.myThis.padding)},".motopress-filler-content click":function(a,b){this.element&&(b.preventDefault(),b.stopPropagation(),parent.CE.Panels.WidgetsDialog.myThis.open(this.element))}})}(jQuery),function(c){CE.Panels.SimpleColumnHelper("CE.Panels.ColumnHelper",{},{overlay:null,splitter:null,initHelpers:function(){this._super();this.initOverlay();this.initSplitter();
this.helpers.push(this.overlay,this.splitter)},initOverlay:function(){this.overlay=c("<div />",{"class":"motopress-overlay"});this.overlay.append(CE.DragDrop.myThis.handles.intermediate.clone(),CE.DragDrop.myThis.handles.left.clone(),CE.DragDrop.myThis.handles.topIn.clone(),CE.DragDrop.myThis.handles.bottomIn.clone(),CE.DragDrop.myThis.handles.leftOut.clone(),CE.DragDrop.myThis.handles.rightOut.clone(),CE.DragDrop.myThis.handles.leftIn.clone(),CE.DragDrop.myThis.handles.rightIn.clone(),CE.DragDrop.myThis.handles.right.clone());
CE.DragDrop.myThis.setCalcWrapperWidth(this.overlay);CE.Grid.myThis.padding&&this.overlay.css("left",CE.Grid.myThis.padding)},initSplitter:function(){this.splitter=CE.Resizer.myThis.splitter.clone()},removeWidget:function(){var a=c("<div />",{"class":"motopress-filler-content",html:'<i class="fa fa-plus"></i>'});this.element.children(".motopress-block-content").html(a)}})}(jQuery),function(c){CE.Panels.BaseColumnHelper("CE.Panels.WrapperColumnHelper",{wrapperId:0,getNextWrapperId:function(){CE.Panels.WrapperColumnHelper.wrapperId++;
return CE.Panels.WrapperColumnHelper.wrapperId}},{wrapperHelper:null,setup:function(a,b){b||(b={});b=c.extend({toolsWrapperTag:"section"},b);return this._super(a,b)},initHelpers:function(){this._super();this.helpers.push(CE.Resizer.myThis.splitter.clone())},initToolsWrapper:function(){this._super();this.toolsWrapper.addClass("mpce-clmn-wrapper-tools-wrapper motopress-wrapper-helper").append(CE.DragDrop.myThis.focusArea.clone(),CE.DragDrop.myThis.handles.intermediate.clone(),CE.DragDrop.myThis.handles.left.clone(),
CE.DragDrop.myThis.handles.right.clone())}})}(jQuery),function(c){CE.Panels.BaseObjectHelper("CE.Panels.RowHelper",{retrieveHelpersContainer:function(a){return parent.MP.Utils.getEdgeRow(a)}},{initToolsWrapper:function(){this._super();this.toolsWrapper.addClass("mpce-row-tools-wrapper").append(CE.DragDrop.myThis.focusArea.clone(),c("<div />",{"class":"mpce-btn-add-row",html:"+",title:"Add Column"}),can.view("rowPanel")())},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-settings click":function(a,
b){b.preventDefault();b.stopPropagation();CE.Selectable.myThis.select(a)},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-columns click":function(a,b){b.preventDefault();b.stopPropagation();parent.CE.Panels.LayoutChooserDialog.myThis.open({positionTarget:a,editedRow:this.element})},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-save click":function(a,b){b.preventDefault();b.stopPropagation();parent.CE.SaveObjectModal.myThis.showModal({categories:parent.CE.ObjectTemplatesLibrary.myThis.getRowCategories()}).done(this.proxy(function(a){var b=
a.category;a.name||(a.name="Row");a.hasOwnProperty("newCategoryTitle")&&(b=a.newCategoryTitle?parent.CE.ObjectTemplatesLibrary.myThis.addRowCategory(a.newCategoryTitle):0);var c=new parent.CE.ContentTemplateParser(this.element);a=new parent.CE.ObjectTemplatesLibrary.RowTemplate({name:a.name,category:b,content:c.content,styles:c.replaceableStyles});parent.CE.ObjectTemplatesLibrary.myThis.saveRow(a)}))},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-add click":function(a,b){if(!this.element.prev(".mpce-add-section-panel").length){var d=
c("<section />",{"class":"mpce-add-section-panel"});this.element.before(d);var e=parent.MP.Utils.detectRowNestingLvl(this.element),f={layoutDialog:parent.CE.Panels.LayoutChooserDialog.myThis};1==e&&(f.templateDialog=parent.CE.Panels.TemplateChooserDialog.myThis);new CE.Panels.AddSectionPanel(d,f)}},"{helpersContainer} >.mpce-tools-wrapper .mpce-btn-add-row click":function(a,b){var d=CE.DragDrop.myThis.spanInnerHtml.clone(),c=this.element.next(".motopress-handle-middle-in");CE.LayoutManager.insertWidgetToPosition(d,
c,"middle-in",!0)}})}(jQuery),function(c){CE.Panels.BaseObjectHelper("CE.Panels.WidgetHelper",{},{initToolsWrapper:function(){this._super();this.toolsWrapper.addClass("mpce-widget-tools-wrapper").append(can.view("widgetPanel")())},getShortcodeEl:function(){return this.element.children("[data-motopress-shortcode]")},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-settings click":function(a,b){CE.Selectable.myThis.selectWidget(this.getShortcodeEl())},"{helpersContainer} >.mpce-tools-wrapper .mpce-panel-btn-save click":function(a,
b){b.preventDefault();b.stopPropagation();parent.CE.SaveObjectModal.myThis.showModal({categories:parent.CE.ObjectTemplatesLibrary.myThis.getWidgetCategories()}).done(this.proxy(function(a){var b=a.category;a.hasOwnProperty("newCategoryTitle")&&(b=a.newCategoryTitle?parent.CE.ObjectTemplatesLibrary.myThis.addWidgetCategory(a.newCategoryTitle):0);CE.StyleEditor.myThis.hasObjectPrivateStyle(this.getShortcodeEl())&&(CE.StyleEditor.myThis.mergeStylesToNewPreset(this.getShortcodeEl()),CE.StyleEditor.myThis.savePresets());
var c=this.getShortcodeEl().attr("data-motopress-shortcode");if(!a.name){var g=parent.CE.WidgetsLibrary.myThis.getObjectById(c);a.name=g.name}g=new parent.CE.ContentParser(this.getShortcodeEl());a=new parent.CE.ObjectTemplatesLibrary.WidgetTemplate({name:a.name,content:g.content,shortcodeId:c,category:b,atts:parent.CE.ShortcodeAtts.getAttrsFromElement(this.getShortcodeEl())});parent.CE.ObjectTemplatesLibrary.myThis.saveWidget(a)}))}})}(jQuery),function(c){can.Control("CE.DraggableObject",{},{init:function(a,
b){this.makeDraggable(a)},restoreClone:function(a){this.element=a;this.element.removeData("uiDraggable");this.makeDraggable(this.element)},makeDraggable:function(a){a.draggable({cursor:"move",distance:5,helper:"clone",handle:".mpce-drag-handle",opacity:"0",zIndex:1,appendTo:".motopress-content-wrapper:first",start:this.proxy("onDragStart"),stop:this.proxy("onDragStop"),drag:this.proxy("onDrag")}).removeClass("ui-draggable")},onDragStart:function(a,b){CE.DragDrop.myThis.draggingElement=b.helper.prevObject;
CE.DragDrop.myThis.$droppedSpan=null;CE.Utils.addSceneAction("drag");CE.LeftBar.myThis.disable();CE.DragDrop.myThis.showOuterHandles();CE.DragDrop.myThis.canDrop=!0;CE.Selectable.myThis.unselect();c(".motopress-splitter").addClass("motopress-hide");this.element.css("opacity",.3)},onDragStop:function(a,b){CE.Utils.removeSceneAction("drag");CE.LeftBar.myThis.enable();CE.DragDrop.myThis.hideOuterHandles();c(".motopress-splitter").removeClass("motopress-hide");this.element.css("opacity","");CE.DragDrop.myThis.helperContainer.children().hide()},
onDrag:function(a,b){CE.DragDrop.myThis.onDrag()}})}(jQuery),function(c){can.Control("CE.DraggableNewBlock",{},{contentWrapperTop:0,cursorAt:{top:-10,left:-10},init:function(a,b){var d=c(".motopress-content-wrapper:first");this.contentWrapperTop=d.length?d.offset().top:0;a.draggable({cursor:"move",cursorAt:this.cursorAt,helper:"clone",zIndex:10002,appendTo:".motopress-content-wrapper:first",drag:this.proxy("onDrag"),start:this.proxy("onDragStart"),stop:this.proxy("onDragStop")})},onDrag:function(a,
b){b.position.top=a.pageY-this.contentWrapperTop-this.cursorAt.top;CE.DragDrop.myThis.onDrag()},onDragStart:function(a,b){CE.DragDrop.myThis.draggingElement=b.helper;CE.DragDrop.myThis.$droppedSpan=null;CE.Utils.addSceneAction("drag");CE.LeftBar.myThis.disable();CE.DragDrop.myThis.showOuterHandles();CE.DragDrop.myThis.canDrop=!0;CE.Selectable.myThis.unselect();CE.DragDrop.myThis.draggingElement.data("dropped",!1)},onDragStop:function(a,b){CE.Utils.removeSceneAction("drag");CE.LeftBar.myThis.enable();
CE.DragDrop.myThis.hideOuterHandles();CE.DragDrop.myThis.helperContainer.children().hide();!1===CE.DragDrop.myThis.draggingElement.data("dropped")&&CE.DragDrop.myThis.emulateDropLastMiddleIn()&&parent.CE.Save.changeContent()}})}(jQuery),function(c){can.Control("CE.DroppableZone",{},{handleName:"",init:function(a,b){this.makeDroppable(a);a.addClass("motopress-handle-inited");this.handleName=a.attr("data-motopress-position")},restoreClone:function(a){this.element=a;this.element.removeData("uiDroppable");
this.makeDroppable(this.element)},makeDroppable:function(a){a.droppable({accept:".motopress-clmn, .motopress-ce-object",tolerance:"pointer",hoverClass:"motopress-droppable-hover",drop:this.proxy("onDrop"),over:this.proxy("onOver"),out:this.proxy("onOut")})},onDrop:function(a,b){if("undefined"!==typeof CE.DragDrop.myThis.hoveredHandles&&1<CE.DragDrop.myThis.hoveredHandles.length&&CE.DragDrop.myThis.hoveredHandles.filter(".motopress-handle-left, .motopress-handle-right").length)if(-1<c.inArray(this.handleName,
["left","right"]))CE.DragDrop.myThis.canDrop=!0;else return!1;if(!CE.DragDrop.myThis.canDrop)return!1;CE.DragDrop.myThis.canDrop=!1;CE.DragDrop.myThis.draggingElement.data("dropped",!0);var d="middle-in"===this.handleName?this.element:this.element.closest(".motopress-clmn"),e=CE.DragDrop.myThis.draggingElement.hasClass("motopress-ce-object"),f=CE.DragDrop.myThis.draggingElement;if(e)if(CE.DragDrop.myThis.draggingElement.hasClass("motopress-ce-widget-template"))var g=CE.DragDrop.myThis.draggingElement.attr("data-id"),
g=parent.CE.ObjectTemplatesLibrary.myThis.getWidgetById(g),f=CE.DragDrop.myThis.createNewBlock(g.atts,!0);else f=CE.DragDrop.myThis.createNewBlock(parent.CE.ShortcodeAtts.getAttrsFromElement(f));if(!CE.LayoutManager.insertWidgetToPosition(f,d,this.handleName,e))parent.MP.Flash.setFlash(localStorage.getItem("blocksOverflow"),"error"),parent.MP.Flash.showMessage();else if(e)var l=setTimeout(function(){CE.Selectable.myThis.showWidgetMainEditTool(f.find("[data-motopress-shortcode]:first"));clearTimeout(l)},
0)},onOver:function(a,b){var c=this.element;CE.DragDrop.myThis.hoveredHandles=CE.Scene.myThis.container.find(".motopress-droppable-hover");c="middle-in"!==this.handleName?c.closest(".motopress-clmn"):c;CE.DragDrop.myThis.showLineTextHelper(c,this.handleName)},onOut:function(a,b){CE.DragDrop.myThis.hoveredHandles=CE.Scene.myThis.container.find(".motopress-droppable-hover");CE.DragDrop.myThis.onDrag()}})}(jQuery),function(c){can.Construct("CE.DragDrop",{myThis:null},{blockContent:c("<div />",{"class":"motopress-block-content"}),
handles:{topIn:c("<div />",{"class":"motopress-handle-top-in","data-motopress-position":"top-in"}),bottomIn:c("<div />",{"class":"motopress-handle-bottom-in","data-motopress-position":"bottom-in"}),intermediate:c("<div />",{"class":"motopress-handle-intermediate","data-motopress-position":"intermediate"}),leftOut:c("<div />",{"class":"motopress-handle-left-out","data-motopress-position":"left-out"}),rightOut:c("<div />",{"class":"motopress-handle-right-out","data-motopress-position":"right-out"}),
leftIn:c("<div />",{"class":"motopress-handle-left-in","data-motopress-position":"left-in"}),rightIn:c("<div />",{"class":"motopress-handle-right-in","data-motopress-position":"right-in"}),left:c("<div />",{"class":"motopress-outer-handle motopress-handle-left motopress-outer-handle-hidden","data-motopress-position":"left"}),right:c("<div />",{"class":"motopress-outer-handle motopress-handle-right motopress-outer-handle-hidden","data-motopress-position":"right"}),insert:c("<div />",{"class":"motopress-handle-insert",
"data-motopress-position":"insert"}),middleIn:c("<span />",{"class":"motopress-outer-handle motopress-handle-middle-in motopress-outer-handle-hidden","data-motopress-position":"middle-in"})},focusArea:c("<div />",{"class":"motopress-focus-area",tabindex:-1}),lineHelpers:{intermediate:c("<div />",{"class":"motopress-line-helper-intermediate"}),leftOut:c("<div />",{"class":"motopress-line-helper-left-out"}),rightOut:c("<div />",{"class":"motopress-line-helper-right-out"}),left:c("<div />",{"class":"motopress-line-helper-left"}),
right:c("<div />",{"class":"motopress-line-helper-right"}),leftIn:c("<div />",{"class":"motopress-line-helper-left-in"}),rightIn:c("<div />",{"class":"motopress-line-helper-right-in"}),topIn:c("<div />",{"class":"motopress-line-helper-top-in"}),bottomIn:c("<div />",{"class":"motopress-line-helper-bottom-in"}),handleMiddle:c("<div />",{"class":"motopress-line-helper-middle-in"}),insert:c("<div />",{"class":"motopress-line-helper-insert"})},textHelpers:{intermediate:c("<div />",{"class":"motopress-text-helper-intermediate",
text:localStorage.getItem("helperNewColumn")}),leftOut:c("<div />",{"class":"motopress-text-helper-left-out",text:localStorage.getItem("helperNewColumn")}),rightOut:c("<div />",{"class":"motopress-text-helper-right-out",text:localStorage.getItem("helperNewColumn")}),left:c("<div />",{"class":"motopress-text-helper-left",text:localStorage.getItem("helperNewColumn")}),right:c("<div />",{"class":"motopress-text-helper-right",text:localStorage.getItem("helperNewColumn")}),leftIn:c("<div />",{"class":"motopress-text-helper-left-in",
text:localStorage.getItem("helperInsert")}),rightIn:c("<div />",{"class":"motopress-text-helper-right-in",text:localStorage.getItem("helperInsert")}),topIn:c("<div />",{"class":"motopress-text-helper-top-in",text:localStorage.getItem("helperInsert")}),bottomIn:c("<div />",{"class":"motopress-text-helper-bottom-in",text:localStorage.getItem("helperInsert")}),handleMiddle:c("<div />",{"class":"motopress-text-helper-middle-in",text:localStorage.getItem("helperMiddle")}),insert:c("<div />",{"class":"motopress-text-helper-insert",
text:localStorage.getItem("helperInsert")})},textHelperHalfSize:null,lineHelperThickness:null,lineHelperHalfThickness:null,handleMiddleHalfThickness:null,helperContainer:c("<div />",{"class":"motopress-helper-container"}).appendTo("body"),newBlock:null,spaceClass:"motopress-space",resizer:null,tools:null,canDrop:!1,spanSizeRules:null,rowHtml:null,rowInnerHtml:null,spanHtml:null,spanInnerHtml:null,bodyEl:c("body"),draggingElement:null,$droppedSpan:null,init:function(){CE.DragDrop.myThis=this;this.setEdges();
new CE.Grid(c("#motopress-ce-grid"));this.setupNewBlock();this.resizer=new CE.Resizer;this.tools=new CE.Tools;new CE.HelpersManager;this.generateSpanSizeRules();this.fixHelpersSize();this.helperContainer.append(Object.values(this.lineHelpers),Object.values(this.textHelpers));this.setupDefaultGridHtml();this.main();parent.MP.Preloader.myThis.load(CE.DragDrop.shortName);parent.MP.Preloader.myThis.hide()},fixHelpersSize:function(){var a=setTimeout(function(){CE.DragDrop.myThis.textHelperHalfSize=Math.round(CE.DragDrop.myThis.textHelpers.handleMiddle.height()/
2);CE.DragDrop.myThis.lineHelperThickness=CE.DragDrop.myThis.lineHelpers.leftIn.outerWidth();CE.DragDrop.myThis.lineHelperHalfThickness=Math.round(CE.DragDrop.myThis.lineHelpers.handleMiddle.height()/2);CE.DragDrop.myThis.handleMiddleHalfThickness=Math.round(3);clearTimeout(a)},0)},setEdges:function(){var a=c(".motopress-content-wrapper .motopress-row").not('.motopress-content-wrapper [data-motopress-group]:not([data-motopress-group="mp_grid"]) .motopress-row');CE.Scene.markEdgeRow(a);a=c(".motopress-content-wrapper .motopress-clmn").not('.motopress-content-wrapper [data-motopress-group]:not([data-motopress-group="mp_grid"]) .motopress-clmn');
CE.Scene.markEdgeSpan(a.not(".motopress-empty"));CE.Scene.markEdgeSpan(a.filter(".motopress-empty"),!0)},setupNewBlock:function(){var a=c(parent.motopressCE.rendered_shortcodes.grid[parent.CE.Iframe.myThis.gridObj.span.shortcode]);a.addClass(parent.CE.Iframe.myThis.gridObj.span.minclass);CE.Scene.markEdgeSpan(a,!0,!0);this.newBlock=a},createNewBlock:function(a,b){b="undefined"!==typeof b?b:!1;var c=this.newBlock.clone();"mp_space"===a.id&&c.addClass(this.spaceClass);this.makeEditable(c,a,!0,null,
b);b&&c.find("[data-motopress-shortcode]:first").attr("data-need-detect-inner-ctrls",!0);return c},setupDefaultGridHtml:function(){this.spanHtml=c(parent.motopressCE.rendered_shortcodes.grid[parent.CE.Iframe.myThis.gridObj.span.shortcode]);CE.Scene.markEdgeSpan(this.spanHtml,!0);CE.Resizer.myThis.setSpanSize(this.spanHtml,"");this.spanInnerHtml=c(parent.motopressCE.rendered_shortcodes.grid[parent.CE.Iframe.myThis.gridObj.span.inner]);CE.Scene.markEdgeSpan(this.spanInnerHtml,!0);CE.Resizer.myThis.setSpanSize(this.spanInnerHtml,
"");this.rowHtml=c(parent.motopressCE.rendered_shortcodes.grid[parent.CE.Iframe.myThis.gridObj.row.shortcode]);CE.Scene.markEdgeRow(this.rowHtml);this.rowInnerHtml=c(parent.motopressCE.rendered_shortcodes.grid[parent.CE.Iframe.myThis.gridObj.row.inner]);CE.Scene.markEdgeRow(this.rowInnerHtml)},main:function(a){a=void 0!==a?a:c(".motopress-content-wrapper");var b=c(".motopress-content-wrapper .motopress-row").not('.motopress-content-wrapper [data-motopress-group]:not([data-motopress-group="mp_grid"]) .motopress-row');
a=a.hasClass("motopress-clmn")?a.find(".motopress-clmn").addBack():a.find(".motopress-clmn");a=a.not('.motopress-content-wrapper [data-motopress-group]:not([data-motopress-group="mp_grid"]) .motopress-clmn');this.recursiveAddHandleMiddle(c(".motopress-content-wrapper"));this.makeEditable(a);this.makeRowEditable(b);this.resizer.updateSplittableOptions(null,null,null,"init");this.resizer.updateAllHandles();this.isEmptyScene()&&CE.Utils.addSceneState("empty-scene")},isEmptyScene:function(){return!c(".motopress-content-wrapper>.motopress-row").length},
makeRowEditable:function(a,b){b="undefined"!==typeof b&&b;a.each(function(){var a=c(this);CE.HelpersManager.myThis.hasHelpers(a)||CE.HelpersManager.myThis.addHelpersToRow(a);var e=a.attr("data-motopress-shortcode");!b&&e||CE.DragDrop.myThis.setAttrs(a);var f=a.control(CE.Controls);"undefined"===typeof f&&(a.ce_controls({isNew:b}),f=a.control(CE.Controls));!b&&e||!f||(f.stylesCtrl.setDefaultAttrs(),a="undefined"!==typeof a.attr("data-motopress-parameters")?a.attr("data-motopress-parameters"):null,
f.settingsCtrl.setDefaultAttrs(a),f.stylesCtrl.save())})},makeEditable:function(a,b,d,e,f){d="undefined"!==typeof d&&d;f="undefined"!==typeof f?f:!1;a.each(this.proxy(function(a,l){l=c(l);if(l.closest(".motopress-block-content").length)return!0;CE.Scene.markEdgeSpan(l);var h=parent.MP.Utils.getEdgeSpan(l);CE.HelpersManager.myThis.addHelpers(l);this.makeDraggable(l);this.makeDroppable();d&&(l.addClass("motopress-new-object"),this.setAttrs(l,e));if(b){var k=l.find("> .motopress-block-content > div");
k.length&&this.setAttrs(k,b)}l.ce_controls({isNew:d});k=l.control(CE.Controls);if(d&&k){k.stylesCtrl.setDefaultAttrs();var n="undefined"!==typeof l.attr("data-motopress-parameters")?l.attr("data-motopress-parameters"):null;k.settingsCtrl.setDefaultAttrs(n);k.stylesCtrl.save()}(h=h&&h.children(".motopress-block-content"))&&h.length&&(h=h.children("[data-motopress-shortcode]"),this.retrieveWidgetControl(h)||(h=this.initShortcodeController(h,d&&!f))&&(d?h.renderShortcode("created",!f):h.element.trigger("render")))}))},
initShortcodeController:function(a,b){var c=a.attr("data-motopress-shortcode");b&&a.addClass("motopress-new-object");switch(c){case "mp_text":case "mp_heading":a.ce_inline_editor({isNew:b});break;case "mp_code":a.ce_code_editor({isNew:b});break;default:a.ce_controls({isNew:b})}return a.control(CE.Controls)},retrieveWidgetControl:function(a){return a.control(CE.Controls)},setAttrs:function(a,b){if("undefined"===typeof b||null===b){var c=null;a.hasClass("motopress-row")?c=a.parent(".motopress-content-wrapper").length?
parent.CE.Iframe.myThis.gridObj.row.shortcode:parent.CE.Iframe.myThis.gridObj.row.inner:"multiple"===parent.CE.Iframe.myThis.gridObj.span.type?(c=parent.MP.Utils.getSpanClass(a.prop("class").split(" ")),c=parent.MP.Utils.getSpanNumber(c),c=parent.CE.Iframe.myThis.gridObj.span.shortcode[c-1]):c=parent.CE.Iframe.myThis.gridObj.span.shortcode;parent.CE.WidgetsLibrary.myThis.setAttrs(a,parent.CE.WidgetsLibrary.myThis.getGroup("mp_grid").id,parent.CE.WidgetsLibrary.myThis.getObject("mp_grid",c))}else parent.CE.ShortcodeAtts.setAttsToEl(a,
b)},makeDraggable:function(a){a.control(CE.DraggableObject)||new CE.DraggableObject(a)},emulateDropLastMiddleIn:function(){var a=this.draggingElement.hasClass("motopress-ce-object"),b=c(".motopress-content-wrapper").find(".motopress-handle-middle-in:last");if(a){var d;this.draggingElement.hasClass("motopress-ce-widget-template")?(a=this.draggingElement.attr("data-id"),a=parent.CE.ObjectTemplatesLibrary.myThis.getWidgetById(a),d=this.createNewBlock(a.atts,!0)):d=this.createNewBlock(parent.CE.ShortcodeAtts.getAttrsFromElement(this.draggingElement));
b.length?CE.LayoutManager.insertWidgetToPosition(d,b,"middle-in",!0):CE.LayoutManager.insertWidgetToPosition(d,CE.Scene.myThis.addSectionPanelEl,"before",!0);var e=setTimeout(function(){CE.Selectable.myThis.showWidgetMainEditTool(d.find("[data-motopress-shortcode]:first"));clearTimeout(e)},0);return!0}return!1},makeDroppable:function(){var a=c(".motopress-content-wrapper").find(".motopress-handle-intermediate, .motopress-handle-left, .motopress-handle-top-in, .motopress-handle-bottom-in, .motopress-handle-left-out, .motopress-handle-right-out, .motopress-handle-left-in, .motopress-handle-right-in, .motopress-handle-middle-in, .motopress-handle-insert, .motopress-handle-right").filter(":not(.motopress-handle-inited)");
c.each(a,function(){new CE.DroppableZone(c(this))})},showLineTextHelper:function(a,b){var d=a.offset(),e=d.left,f=d.top,d=a.closest(".motopress-row"),g=parent.MP.Utils.getEdgeRow(d),d=g.height(),l=g.offset().top,h=parseFloat(g.css("border-top-width")),g=parseFloat(g.css("padding-top")),k,n,p,m;0<=c.inArray(b,["intermediate","left-out","right-out","left","right"])&&(n=null,n=parent.MP.Utils.isSpanWrapper(a)?a.children(".motopress-wrapper-helper").find(".motopress-handle-intermediate"):a.children(".motopress-overlay").find(".motopress-handle-intermediate"),
p=Math.floor(n.width()),4<p?(k=2,n=p-4,p-=k):(k=1,n=p),m=0,CE.Grid.myThis.padding||(m=k/2));switch(b){case "intermediate":this.lineHelpers.intermediate.css({width:n,height:d,top:l+g+h,left:Math.ceil(e+CE.Grid.myThis.padding-p-m)}).show();this.textHelpers.intermediate.css({top:this.lineHelpers.intermediate.offset().top,left:this.lineHelpers.intermediate.offset().left+n}).show();break;case "left":case "left-out":"left"===b?(f=this.lineHelpers.left,m=this.textHelpers.left):(f=this.lineHelpers.leftOut,
m=this.textHelpers.leftOut);p=e+CE.Grid.myThis.padding+1;n=0;f.css({width:n,height:d,top:l+g+h,left:p}).show();m.css({top:f.offset().top,left:p+n}).show();break;case "right":case "right-out":"right"===b?(f=this.lineHelpers.right,m=this.textHelpers.right):(f=this.lineHelpers.rightOut,m=this.textHelpers.rightOut);n=c(document).width();p=e+a.outerWidth()-CE.Grid.myThis.padding;p>=n&&(p=n-1);n=0;e=p-m.outerWidth();f.css({width:n,height:d,top:l+g+h,left:p}).show();m.css({top:f.offset().top,left:e}).show();
break;case "left-in":this.lineHelpers.leftIn.css({height:a.outerHeight(),top:f,left:e+CE.Grid.myThis.padding}).show();this.textHelpers.leftIn.css({top:this.lineHelpers.leftIn.offset().top,left:this.lineHelpers.leftIn.offset().left+this.lineHelperThickness}).show();break;case "right-in":this.lineHelpers.rightIn.css({height:a.outerHeight(),top:f,left:e+a.outerWidth()-this.lineHelperThickness-CE.Grid.myThis.padding}).show();this.textHelpers.rightIn.css({top:this.lineHelpers.rightIn.offset().top,left:this.lineHelpers.rightIn.offset().left-
this.textHelpers.rightIn.outerWidth()}).show();break;case "top-in":this.lineHelpers.topIn.css({width:a.outerWidth(),top:f,left:e}).show();this.textHelpers.topIn.css({top:f,left:e}).show();break;case "bottom-in":this.lineHelpers.bottomIn.css({width:a.outerWidth(),top:f+a.outerHeight()-this.lineHelperThickness,left:e}).show();this.textHelpers.bottomIn.css({top:this.lineHelpers.bottomIn.offset().top,left:this.lineHelpers.bottomIn.offset().left}).show();break;case "middle-in":p=a.outerWidth();d=a.height()-
2*parseInt(this.lineHelpers.handleMiddle.css("outline-width"));l=f+parseInt(this.lineHelpers.handleMiddle.css("outline-width"));h=e-CE.Grid.myThis.padding;e=c(".motopress-content-wrapper > .motopress-handle-middle-in:first");if(a[0]===e[0]||a[0]===c(".motopress-content-wrapper > .motopress-handle-middle-in:last")[0])d=c(".motopress-content-wrapper"),h=d.offset(),p=d.width(),d=20,a[0]===e[0]&&(l=h.top-d),h=h.left-CE.Grid.myThis.padding;this.lineHelpers.handleMiddle.css({width:p+2*CE.Grid.myThis.padding,
height:d,top:l,left:h}).show();e=this.lineHelpers.handleMiddle.offset();this.textHelpers.handleMiddle.css({top:e.top,left:e.left}).show();break;case "insert":p=e+CE.Grid.myThis.padding,e=p-this.textHelpers.insert.outerWidth(),0>e&&(e=p+a.width()+1),this.lineHelpers.insert.css({width:a.width(),height:a.outerHeight(),left:p,top:f}).show(),this.textHelpers.insert.css({top:this.lineHelpers.insert.offset().top,left:e}).show()}},removeEmptyBlocks:function(a,b){var c=a.prev(".motopress-empty"),e=a.next(".motopress-empty"),
f=0,g=0;"undefined"!=typeof c[0]&&(f=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(c.prop("class").split(" "))));"undefined"!=typeof e[0]&&(g=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(e.prop("class").split(" "))));if("undefined"!=typeof c[0]||"undefined"!=typeof e[0])a.removeClass(b),b=parent.CE.Iframe.myThis.gridObj.span["class"]+(parent.MP.Utils.getSpanNumber(b)+f+g),a.addClass(b),c.remove(),e.remove();return b},clearIfEmpty:function(a,b){"undefined"===typeof b&&(b=
"default");if(null!==a){var d=parent.MP.Utils.getEdgeRow(a).children(".motopress-clmn");if(!d.length){for(var e=0;0===a.parent(".motopress-content-wrapper").length&&!a.siblings(".motopress-row, .motopress-clmn").length&&!a.parent(".motopress-content-wrapper").length;)if(a.siblings(".motopress-handle-middle-in, .motopress-wrapper-helper, .mpce-row-tools-wrapper").remove().end().unwrap(),e++,100===e){console.log("LOOPED IN `clearIfEmpty()`");break}var e=!1,f=null;a.siblings(".motopress-row").length||
(e=!0,a.parent(":not(.motopress-content-wrapper)").length?f=a.parent():a.parent(".motopress-row").length&&(f=a.parent(".motopress-row")));a.prev(".mpce-add-section-panel").length&&a.prev(".mpce-add-section-panel").remove();a.prev(".motopress-handle-middle-in").remove().end().remove();var g=a.parent();if("undefined"!==typeof g&&null!==g&&!g.hasClass("motopress-content-wrapper")){var l=g.children(".motopress-row");if(1===l.length&&(l=parent.MP.Utils.getEdgeRow(l).children(".motopress-clmn"),1===l.length)){parent.MP.Utils.getSpanClass(l.prop("class").split(" "));
var h=parent.MP.Utils.getSpanClass(g.prop("class").split(" "));CE.Resizer.myThis.setSpanSize(l,h);g.replaceWith(l)}}return e?f:a}if(1===d.length&&!a.parent(".motopress-content-wrapper").length){var k,n,p=null;d.parentsUntil(".motopress-content-wrapper",".motopress-clmn").each(function(){k=c(this).children(".motopress-row");n=c(this).siblings(".motopress-clmn");p=c(this).closest(".motopress-row").parent(".motopress-content-wrapper");if(1===k.length&&(n.length||p.length)){var e=c(this),f=parent.MP.Utils.getSpanNumber(parent.MP.Utils.getSpanClass(e.prop("class").split(" ")));
CE.Resizer.myThis.setSpanSize(d,f);e.replaceWith(d);a="remove"===b?{row:e.parent()}:null}})}}return a},recursiveAddHandleMiddle:function(a){a.children(".motopress-row").each(function(a){var d=CE.DragDrop.myThis.handles.middleIn;0==a&&(c(this).prevAll(".motopress-outer-handle").length||c(this).before(d.clone()));a=c(this).next(".mpce-wp-more-tag");a.length?a.next(".motopress-outer-handle").length||a.after(d.clone()):c(this).next(".motopress-outer-handle").length||c(this).after(d.clone());parent.MP.Utils.getEdgeRow(c(this)).children(".motopress-clmn").each(function(){parent.MP.Utils.isSpanWrapper(c(this))&&
CE.DragDrop.myThis.recursiveAddHandleMiddle(parent.MP.Utils.getEdgeSpan(c(this)))})})},addHandleMiddle:function(a){a.parent(".motopress-clmn, .motopress-content-wrapper").children(".motopress-row").each(function(a){var d=CE.DragDrop.myThis.handles.middleIn;0==a&&(a=c(this).prevAll(".motopress-handle-middle-in"),a.length?a.each(function(a,b){0!=a&&c(b).remove()}):(c(this).before(d.clone()),c(this).parent().is("[data-motopress-wrapper-id]")&&CE.DragDrop.myThis.setCalcWrapperWidth(c(this).prev())));
d=d.clone();a=c(this).nextUntil(".motopress-row",".motopress-handle-middle-in");0==a.length?(c(this).next(".mpce-wp-more-tag").length?c(this).next(".mpce-wp-more-tag").after(d):c(this).after(d),c(this).parent().is("[data-motopress-wrapper-id]")&&CE.DragDrop.myThis.setCalcWrapperWidth(d)):a.each(function(a,b){0!=a&&c(b).remove()})})},resetLastHandleMiddleHeight:function(){c(".motopress-content-wrapper > .motopress-handle-middle-in:last").height("")},getMinAllowedSpanSize:function(a,b,c){for(var e=
1,f,g=1;g<=parent.CE.Iframe.myThis.gridObj.row.col;g++)if(e=g,b){if(f=a/100*CE.Grid.myThis.colWidthByNumber[g],this.resizer.isAllowedColSize(c,f))break}else if(this.resizer.isAllowedColSize(g,a))break;return e},recalcRowSizes:function(a,b){b="undefined"!==typeof b?b:{};b=c.extend({insertPosition:null,wrapperPosition:null},b);var d=parent.MP.Utils.getEdgeRow(a),e=parseFloat(d.css("width")),f=d.children(".motopress-clmn");if(!f.length)return[];d=null!==b.insertPosition?f.length+1:f.length;if(d>parent.CE.Iframe.myThis.gridObj.row.col)return[];
var g=this.getSpanSizeRules(d),l=this.getMinAllowedSpanSize(e,!1),h=[],d=!0,k,n={index:b.insertPosition,isWrapper:!1,size:g[b.insertPosition],minSize:l,isAllowed:g[b.insertPosition]>=l},p=-1;f.each(this.proxy(function(a,d){p++;null!==b.insertPosition&&b.insertPosition===a?(k=n,p++):(k={},k.index=p,k.isWrapper=c(d).is("[data-motopress-wrapper-id]"),k.size=g[p],k.isWrapper?(k.wrapperWidth=e/100*CE.Grid.myThis.colWidthByNumber[g[p]],k.minSpan=this.resizer.getMinChildColumn(c(d)),k.minSize=this.getMinAllowedSpanSize(e,
!0,k.minSpan),k.isAllowed=this.resizer.isAllowedColSize(k.minSpan,k.wrapperWidth)):(k.minSize=l,b.wrapperPosition===p&&1>=k.minSize&&(k.minSize=2),k.isAllowed=this.resizer.isAllowedColSize(g[p],e)));h.push(k)}));b.insertPosition===f.length&&h.push(n);var m=0,q=0,r=!1;c.each(h,function(a,b){b.size<b.minSize?m+=b.minSize-b.size:q+=b.size-b.minSize;r||b.isAllowed||(r=!0)});if(r)if(m>q)d=!1;else for(var t=0,u=0,s=0;2*m!==t+u;){for(f=0;f<h.length;f++)h[f].isAllowed&&h[f].size>h[f].minSize&&t<m?(h[f].size--,
t++):!h[f].isAllowed&&h[f].size<h[f].minSize&&(h[f].size++,u++);if(50<=++s){d=!1;break}}t=[];for(f=0;f<h.length;f++)t.push(h[f].size);return d?t:[]},canBeInserted:function(a,b){if("before"===b||-1<c.inArray(b,["top-in","bottom-in","insert","middle-in"]))return!0;if(-1<c.inArray(b,["left-in","right-in"])){for(var d=parseFloat(a.css("width")),e=this.getSpanSizeRules(2),f,g=!0,l=0;l<e.length;l++)if(f=this.getMinAllowedSpanSize(d,!1,e[l]),e[l]<f){g=!1;break}if(!g)return!1}d=a.closest(".motopress-row-edge").children(".motopress-clmn");
if(d.length>parent.CE.Iframe.myThis.gridObj.row.col)return!1;e={};-1<c.inArray(b,["left-out","left","intermediate"])&&(e.insertPosition=d.index(a));-1<c.inArray(b,["right-out","right"])&&(e.insertPosition=d.index(a)+1);-1<c.inArray(b,["left-in","right-in"])&&(e.wrapperPosition="left-in"==b?d.index(a):d.index(a)+1);e=this.recalcRowSizes(a.closest(".motopress-row"),e);return 0<e.length},resize:function(a,b,c,e){e="object"===_typeof(e)?e:{};null!==a&&"undefined"!==typeof a&&CE.LayoutManager.rearrangeSpans(a,
e.from);"insert"!==c&&(a=b.parent(),CE.LayoutManager.rearrangeSpans(a,e.to))},getSpanSizeRules:function(a){return this.spanSizeRules.hasOwnProperty(a)?this.spanSizeRules[a]:[]},generateSpanSizeRules:function(){for(var a=parent.CE.Iframe.myThis.gridObj.row.col,b=[],c=1;c<=a;c++){b[c]=[];for(var e=Math.floor(a/c),f=a%c,g=1;g<=c;g++)b[c].push(g<=f?e+1:e)}this.spanSizeRules=b},setCalcWrapperWidth:function(a){if(CE.Grid.myThis.padding){var b=2*CE.Grid.myThis.padding,c="";parent.MP.Utils.Browser.Mozilla?
c="-moz-":parent.MP.Utils.Browser.Chrome&&(c="-webkit-");a.css("width",c+"calc(100% - "+b+"px)")}},hideOuterHandles:function(){c(".motopress-outer-handle").addClass("motopress-outer-handle-hidden")},showOuterHandles:function(){c(".motopress-outer-handle").removeClass("motopress-outer-handle-hidden")},onDrag:function(){var a=CE.Scene.myThis.container.find(".motopress-droppable-hover");if(a.length){if(a=a.attr("data-motopress-position"),null!==a){var a=".motopress-line-helper-"+a+", .motopress-text-helper-"+
a,b=this.helperContainer.children();b.not(a).hide();b.filter(a).show()}}else this.helperContainer.children().hide()}})}(jQuery),function(c){CE.Selectable=can.Construct({myThis:null,scrollY:0,focusFlag:!1,blurFlag:!1,setScrollY:function(a){CE.Selectable.scrollY=a},focusWithoutScroll:function(a){if(!CE.Selectable.focusFlag){CE.Selectable.focusFlag=!0;a.focus();window.scrollTo(0,CE.Selectable.scrollY);var b=setTimeout(function(){CE.Selectable.focusFlag=!1;clearTimeout(b)},0)}return a},blurWithoutScroll:function(a){if(!CE.Selectable.blurFlag){CE.Selectable.blurFlag=
!0;a.blur();window.scrollTo(0,CE.Selectable.scrollY);var b=setTimeout(function(){CE.Selectable.blurFlag=!1;clearTimeout(b)},0)}return a},getFocusAreaBySelected:function(a){var b=parent.MP.Utils.getEntityTypeByElement(a);return b.is_row?parent.MP.Utils.getEdgeRow(a).find("> .mpce-row-tools-wrapper > .motopress-focus-area"):b.is_clmn?parent.MP.Utils.getEdgeSpan(a).find("> .motopress-focus-area"):a.siblings(".motopress-focus-area")}},{selectedClass:"motopress-selected",init:function(){CE.Selectable.myThis=
this;c(document).mousedown(function(){CE.Selectable.setScrollY(window.scrollY)});c(document).mouseup(function(){CE.Selectable.setScrollY(window.scrollY)});this.makeSelectable()},isHandleForSelected:function(a){a.closest(".mpce-panel-btn-settings").length&&(a=a.closest(".mpce-panel-btn-settings"));if(!a.hasClass("mpce-panel-btn-settings"))return!1;var b=this.getSelected();return b.length?b.is(this.getShortcodeByHandle(a)):!1},makeSelectable:function(){parent.CE.EventDispatcher.Dispatcher.addListener(CE.SceneEvents.SnapshotApplied.NAME,
this.proxy(CE.Selectable.myThis.unselect))},detectSelectHandleType:function(a){var b="";return b=a.closest(".mpce-object-panel.mpce-row-panel").length?"row":a.closest(".mpce-object-panel.mpce-clmn-panel").length?"span":"widget"},selectShortcode:function(a){a=a.hasClass("motopress-row")?parent.MP.Utils.getEdgeRow(a).find(">.mpce-row-tools-wrapper>.mpce-row-panel>.mpce-panel-btn-settings"):a.hasClass("motopress-clmn")?parent.MP.Utils.getEdgeSpan(a).find(">.mpce-clmn-tools-wrapper>.mpce-clmn-panel>.mpce-panel-btn-settins"):
a.siblings(".mpce-widget-tools-wrapper").find(">.mpce-widget-panel>.mpce-panel-btn-settings");this.select(a)},select:function(a){this.unselect();var b=null;CE.Selectable.focusWithoutScroll(a.siblings(".motopress-focus-area"));b=this.detectSelectHandleType(a);"row"===b?(a.closest(".motopress-row").addClass(this.selectedClass),b=a.closest(".motopress-row")):("span"===b?a.closest(".motopress-clmn").addClass(this.selectedClass):a.closest(".motopress-clmn").children(".motopress-block-content").addClass(this.selectedClass),
b=a.closest(".motopress-clmn"));CE.Utils.addSceneAction("select");(b.hasClass("ce_controls")||b.hasClass("ce_inline_editor")||b.hasClass("ce_code_editor")||b.hasClass("motopress-row"))&&!parent.CE.Panels.SettingsDialog.myThis.element.dialog("isOpen")&&parent.CE.Panels.SettingsDialog.myThis.open(a)},selectWidgetOfSpan:function(a){a=parent.MP.Utils.getEdgeSpan(a);this.select(a.find(">.motopress-block-content>.mpce-tools-wrapper>.mpce-object-panel>.mpce-panel-btn-settings"))},selectWidget:function(a){a=
a.closest(".motopress-clmn");this.selectWidgetOfSpan(a)},showWidgetMainEditTool:function(a){var b=a.control(CE.Controls);b instanceof CE.InlineEditor||b instanceof CE.CodeEditor?b.open():this.selectWidget(a)},unselect:function(){parent.CE.Panels.SettingsDialog.myThis.close();var a=c(".motopress-content-wrapper ."+this.selectedClass);a.length&&(a.each(function(){c(this).removeClass(CE.Selectable.myThis.selectedClass)}),CE.Selectable.blurWithoutScroll(CE.Selectable.getFocusAreaBySelected(a)));CE.Utils.removeSceneAction("select")},
getSelected:function(){var a=c(parent.MP.Utils.convertClassesToSelector(this.selectedClass));parent.MP.Utils.getEntityTypeByElement(a).is_widget&&(a=a.children("[data-motopress-shortcode]"));return a},getShortcodeByHandle:function(a){var b=this.detectSelectHandleType(a);return"row"==b?a.closest(".motopress-row"):"span"==b?a.closest(".motopress-clmn"):a.closest(".motopress-clmn").find(".motopress-block-content").first().children("[data-motopress-shortcode]")}})}(jQuery),function(c){can.Control.extend("CE.Panels.AddSectionPanel",
{},{layoutDialog:null,templateDialog:null,permanent:!1,init:function(a,b){b.layoutDialog&&(a.append(c("<button />",{"class":"mpce-add-section-btn",text:"Add Section"})),this.layoutDialog=b.layoutDialog);b.templateDialog&&(a.append(c("<button />",{"class":"mpce-add-template-btn",text:"Add Template"})),this.templateDialog=b.templateDialog);b.permanent?(this.permanent=!0,this.element.addClass("mpce-permanent-add-section-panel")):a.append(c("<span />",{"class":"mpce-close fa fa-close"}))},restoreClone:function(a){this.element=
a},hide:function(){this.element.hide()},show:function(){this.element.show()},".mpce-add-section-btn click":function(a,b){b.preventDefault();b.stopPropagation();this.layoutDialog.open({positionTarget:this.element,insertMarker:this.element}).then(this.proxy(function(){this.permanent||this.element.remove()}))},".mpce-add-template-btn click":function(a,b){b.preventDefault();b.stopPropagation();this.templateDialog.open({positionTarget:this.element,insertMarker:this.element}).then(this.proxy(function(){this.permanent||
this.element.remove()}))},".mpce-close click":function(){this.element.remove()}})}(jQuery),function(c){c.hasOwnProperty("stellar")&&c.stellar("refresh");c.hasOwnProperty("fn")&&c.fn.hasOwnProperty("button")&&c.fn.button.hasOwnProperty("noConflict")&&(c.fn.btn=c.fn.button.noConflict());new CE.Utils;new CE.Scene;parent.MP.Editor.myThis.load()}(jQuery),jQuery(document).ready(function(c){parent.CE.EventDispatcher.Dispatcher.addListener(CE.SceneEvents.SnapshotTakenBefore.NAME,function(a){c(".motopress-tabs-obj").each(function(){try{if(c(this).data("uiTabs")){var a=
c(this).tabs("option");c(this).data("mpceUiOptions",a);c(this).tabs("destroy")}}catch(d){}});c(".motopress-flexslider").each(function(){try{var a=c(this).data("flexslider");if(a){var d=c.extend({},a.vars,!0);c(this).data("mpceFlexSliderOptions",d);c(this).flexslider("destroy")}}catch(e){}})});parent.CE.EventDispatcher.Dispatcher.addListener(parent.CE.LocalRevision.Events.RevisionPicked.NAME,function(a){c(".motopress-tabs-obj").each(function(){try{var a=c(this).data("mpceUiOptions");can.isPlainObject(a)&&
c(this).tabs(a)}catch(d){}});c(".motopress-flexslider").each(function(){try{var a=c(this).data("mpceFlexSliderOptions");can.isPlainObject(a)&&c(this).flexslider(a)}catch(d){}})})})}catch(y){parent.MP.Error.log(y,!0)}};
